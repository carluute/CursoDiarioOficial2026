<!DOCTYPE html>
<html lang="es" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <title>Curso: El Diario Oficial de Colombia ‚Äì INC | ¬øC√≥mo publicar a tiempo? </title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
<script>
  // Compatibilidad: reemplaza SDKs de plataforma no disponibles en GitHub Pages @carluute
  window.elementSdk = null;
  window.dataSdk = null;
</script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700;800;900&amp;display=swap" rel="stylesheet">
  <style>
    html { 
      font-size: clamp(14px, 2vw, 16px);
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased;
    }

    body {
      font-family: Verdana, 'Nunito Sans', sans-serif;
      line-height: 1.6;
      letter-spacing: 0.5px;
      -webkit-tap-highlight-color: transparent;
    }

    .font-display { 
      font-family: 'Nunito Sans', Verdana, sans-serif; 
      font-weight: 900; 
      letter-spacing: -0.5px;
      color: #000000;
    }

    .font-display-bold { 
      font-family: 'Nunito Sans', Verdana, sans-serif; 
      font-weight: 800;
      color: #1d3c50;
    }

    .font-body { 
      font-family: Verdana, 'Nunito Sans', sans-serif; 
      font-weight: 400;
      color: #000000;
    }

    :root {
      --color-inc-primary: #618485;
      --color-inc-dark: #1d3c50;
      --color-inc-accent: #5187c;
      --color-inc-black: #000000;
      --color-inc-white: #ffffff;
      --contrast-high: #000000;
    }

    body { 
      background: linear-gradient(135deg, #1d3c50 0%, #2a5273 50%, #1d3c50 100%);
    }

    *:focus-visible {
      outline: 4px solid #FFD700;
      outline-offset: 2px;
      border-radius: 4px;
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(30px); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(97, 132, 133, 0.6), inset 0 0 10px rgba(97, 132, 133, 0.3); }
      50% { box-shadow: 0 0 40px rgba(97, 132, 133, 0.9), inset 0 0 15px rgba(97, 132, 133, 0.5); }
    }

    .slide-enter { animation: slideIn 0.5s ease-out forwards; }
    .fade-enter { animation: fadeIn 0.4s ease-out forwards; }
    .pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }

    .progress-fill { transition: width 0.5s ease-out; }

    .card-hover {
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }

    .card-hover:hover {
      transform: translateY(-4px);
      border-color: #618485;
      box-shadow: 0 12px 40px rgba(0,0,0,0.3), 0 0 15px rgba(97, 132, 133, 0.4);
    }

    .planning-card {
      background: linear-gradient(135deg, rgba(29, 60, 80, 0.9) 0%, rgba(20, 45, 65, 0.9) 100%);
      border: 3px solid #618485;
      transition: all 0.3s ease;
    }

    .planning-card:hover {
      border-color: #FFD700;
      box-shadow: 0 8px 32px rgba(97, 132, 133, 0.4), 0 0 20px rgba(255, 215, 0, 0.2);
    }

    .planning-input {
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid #618485;
      color: #ffffff;
      font-size: 1rem;
      padding: 0.75rem;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .planning-input:focus {
      background: rgba(255, 255, 255, 0.15);
      border-color: #FFD700;
      outline: none;
      box-shadow: 0 0 25px rgba(255, 215, 0, 0.5), inset 0 0 15px rgba(255, 215, 0, 0.1);
    }

    select.planning-input {
      color: #ffffff;
      background-color: rgba(29, 60, 80, 0.5);
    }

    select.planning-input option {
      background-color: #1d3c50;
      color: #ffffff;
      font-weight: 600;
      padding: 0.5rem;
    }

    .btn-primary {
      background: linear-gradient(135deg, #1d3c50 0%, #618485 100%);
      color: #ffffff;
      padding: 1rem 1.75rem;
      border-radius: 8px;
      font-weight: 900;
      font-family: 'Nunito Sans', Verdana, sans-serif;
      border: 2px solid #FFD700;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
    }

    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(29, 60, 80, 0.4), 0 0 20px rgba(255, 215, 0, 0.5);
    }

    .btn-primary:focus-visible {
      outline: 4px solid #FFD700;
      outline-offset: 2px;
    }

    .btn-secondary {
      background: rgba(29, 60, 80, 0.1);
      color: #1d3c50;
      padding: 1rem 1.75rem;
      border-radius: 8px;
      font-weight: 900;
      font-family: 'Nunito Sans', Verdana, sans-serif;
      border: 3px solid #1d3c50;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
    }

    .btn-secondary:hover {
      background: rgba(29, 60, 80, 0.2);
    }

    .progress-bar-inc {
      height: 10px;
      background: #1d3c50;
      border-radius: 5px;
      overflow: hidden;
      border: 2px solid #618485;
    }

    .progress-bar-inc-fill {
      height: 100%;
      background: linear-gradient(90deg, #618485 0%, #FFD700 50%, #5187c 100%);
      transition: width 0.5s ease;
      box-shadow: inset 0 0 5px rgba(255, 215, 0, 0.5);
    }

    .glossary-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      z-index: 101;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .glossary-modal.active {
      display: flex;
    }

    .glossary-content {
      background: #ffffff;
      border: 4px solid #1d3c50;
      border-radius: 12px;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      padding: 2rem;
      color: #1d3c50;
    }

    .glossary-entry {
      margin-bottom: 1.5rem;
      padding-bottom: 1.5rem;
      border-bottom: 2px solid #618485;
    }

    .glossary-entry:last-child {
      border-bottom: none;
    }

    .glossary-term {
      font-family: 'Nunito Sans', Verdana, sans-serif;
      font-weight: 900;
      font-size: 1.1rem;
      color: #1d3c50;
      margin-bottom: 0.5rem;
    }

    .glossary-definition {
      color: #333333;
      font-size: 0.95rem;
      line-height: 1.7;
    }

    /* Quick Navigation - Esquina Superior Izquierda */
    .quick-nav {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      position: fixed;
      top: 5rem;
      left: 1rem;
      z-index: 40;
    }

    .quick-nav-btn {
      width: 2.8rem;
      height: 2.8rem;
      min-width: 2.8rem;
      min-height: 2.8rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      font-weight: 700;
      border: 2px solid #FFD700;
      background: linear-gradient(135deg, rgba(29, 60, 80, 0.9) 0%, rgba(97, 132, 133, 0.7) 100%);
      color: #FFD700;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4), 0 0 10px rgba(255, 215, 0, 0.2);
      backdrop-filter: blur(8px);
    }

    .quick-nav-btn:hover {
      transform: scale(1.2) translateY(-2px);
      box-shadow: 0 8px 30px rgba(255, 215, 0, 0.6), 0 0 20px rgba(255, 215, 0, 0.3);
      background: linear-gradient(135deg, rgba(29, 60, 80, 0.95) 0%, rgba(97, 132, 133, 0.85) 100%);
    }

    .quick-nav-btn:focus-visible {
      outline: 3px solid #FFD700;
      outline-offset: 3px;
    }

    @media (max-width: 768px) {
      .quick-nav {
        top: 4.75rem;
        left: 0.75rem;
        gap: 0.5rem;
      }

      .quick-nav-btn {
        width: 2.4rem;
        height: 2.4rem;
        min-width: 2.4rem;
        min-height: 2.4rem;
        font-size: 1.1rem;
      }
    }

    .inc-logo {
      width: 100px;
      height: 100px;
      margin: 0 auto 1rem;
    }

    .certificate-container {
      background: #ffffff;
      border: 4px solid #1d3c50;
      border-radius: 8px;
      padding: 2rem;
      max-width: 900px;
      margin: 2rem auto;
      position: relative;
      box-shadow: 0 15px 50px rgba(0,0,0,0.4);
      color: #1d3c50;
    }

    .certificate-header {
      text-align: center;
      border-bottom: 3px solid #1d3c50;
      padding-bottom: 1.5rem;
      margin-bottom: 2rem;
    }

    .certificate-title {
      font-family: 'Nunito Sans', Verdana, sans-serif;
      font-weight: 900;
      font-size: clamp(1.5rem, 4vw, 2.5rem);
      color: #1d3c50;
      margin: 0.5rem 0;
    }

    .certificate-seal {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: linear-gradient(135deg, #618485 0%, #5187c 100%);
      font-size: 2.5rem;
      margin-bottom: 1rem;
      border: 4px solid #1d3c50;
      box-shadow: 0 4px 15px rgba(29, 60, 80, 0.3);
    }

    .info-panel {
      background: rgba(0, 0, 0, 0.1);
      border: 3px solid #1d3c50;
      border-radius: 10px;
      padding: 1.5rem;
    }

    .credits-section {
      background: linear-gradient(135deg, rgba(29, 60, 80, 0.1) 0%, rgba(97, 132, 133, 0.1) 100%);
      border: 3px solid #1d3c50;
      border-radius: 12px;
      padding: 2rem;
      margin-top: 2rem;
      color: #1d3c50;
    }

    .credits-title {
      font-family: 'Nunito Sans', Verdana, sans-serif;
      font-weight: 900;
      font-size: 1.3rem;
      margin-bottom: 1rem;
    }

    .credits-text {
      font-size: 0.95rem;
      line-height: 1.8;
      margin-bottom: 1rem;
    }

    .credits-list {
      list-style: none;
      padding-left: 0;
      font-size: 0.9rem;
    }

    .credits-list li {
      padding: 0.4rem 0;
      color: #1d3c50;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0,0,0,0);
      white-space: nowrap;
      border-width: 0;
    }

    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: #FFD700;
      color: #1d3c50;
      padding: 0.5rem 1rem;
      text-decoration: none;
      font-weight: 900;
      z-index: 200;
    }

    .skip-link:focus {
      top: 0;
    }

    @media (max-width: 768px) {
      html {
        font-size: clamp(12px, 2.5vw, 14px);
      }

      .btn-primary, .btn-secondary {
        padding: 0.875rem 1.5rem;
        font-size: 0.95rem;
      }

      .certificate-container {
        padding: 1.5rem;
        margin: 1rem auto;
      }

      .certificate-title {
        font-size: clamp(1.25rem, 3.5vw, 1.75rem);
      }

      .certificate-seal {
        width: 80px;
        height: 80px;
        font-size: 2rem;
      }

      .glossary-content {
        padding: 1.5rem;
      }
    }

    @media (max-width: 480px) {
      html {
        font-size: 13px;
      }

      .btn-primary, .btn-secondary {
        padding: 0.75rem 1.25rem;
        font-size: 0.9rem;
        width: 100%;
      }

      .certificate-container {
        padding: 1rem;
        border: 3px solid #1d3c50;
      }

      .certificate-title {
        font-size: 1.25rem;
      }

      .certificate-seal {
        width: 70px;
        height: 70px;
        font-size: 1.75rem;
        margin-bottom: 0.75rem;
      }

      .glossary-content {
        padding: 1rem;
        max-height: 90vh;
        margin: 0 1rem;
        border-radius: 8px;
      }

      .credits-section {
        padding: 1rem;
      }
    }

    .difficulty-badge {
      display: inline-block;
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 800;
      border: 2px solid currentColor;
    }

    .difficulty-low {
      background: rgba(34, 197, 94, 0.25);
      color: #0d5a2d;
      border-color: #0d5a2d;
    }

    .difficulty-medium {
      background: rgba(251, 146, 60, 0.25);
      color: #8b4513;
      border-color: #8b4513;
    }

    .difficulty-high {
      background: rgba(239, 68, 68, 0.25);
      color: #991b1b;
      border-color: #991b1b;
    }
  </style>
  <style>body { box-sizing: border-box; }</style>
 </head>
 <body class="h-full font-body"><a href="#main-content" class="skip-link">Ir al contenido principal</a>
  <div id="app" class="h-full w-full overflow-auto" style="background: linear-gradient(135deg, #1d3c50 0%, #2a5273 50%, #1d3c50 100%);"><!-- Welcome Screen -->
   <div id="welcome-screen" class="min-h-full flex flex-col items-center justify-center p-4 md:p-6">
    <main id="main-content" class="text-center max-w-2xl mx-auto slide-enter w-full">
     <div class="mb-8">
      <div class="w-20 h-20 md:w-24 md:h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center pulse-glow border-4 border-yellow-400" style="border-color: #FFD700;"><span class="text-4xl md:text-5xl" aria-hidden="true">üìú</span>
      </div>
      <h1 id="main-title" class="font-display text-2xl md:text-4xl lg:text-5xl font-bold text-white mb-4">Curso: El Diario Oficial</h1>
      <p id="welcome-text" class="text-base md:text-lg font-semibold text-white mb-2" style="color: #ffffff;">Bienvenido al curso interactivo sobre el Diario Oficial de Colombia</p>
      <p class="text-base md:text-lg font-bold" style="color: #FFD700;">Imprenta Nacional de Colombia</p>
     </div>
     <div class="grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4 mb-6 md:mb-8 text-center">
      <div class="bg-white/15 rounded-lg md:rounded-xl p-3 md:p-4 backdrop-blur border-3 border-yellow-400" style="border-color: #FFD700;">
       <div class="text-2xl md:text-3xl mb-1" aria-hidden="true">
        üìö
       </div>
       <div class="text-xl md:text-2xl font-bold text-white">
        8
       </div>
       <div class="text-xs md:text-sm font-semibold text-white">
        M√≥dulos
       </div>
      </div>
      <div class="bg-white/15 rounded-lg md:rounded-xl p-3 md:p-4 backdrop-blur border-3 border-yellow-400" style="border-color: #FFD700;">
       <div class="text-2xl md:text-3xl mb-1" aria-hidden="true">
        ‚ùì
       </div>
       <div class="text-xl md:text-2xl font-bold text-white">
        8
       </div>
       <div class="text-xs md:text-sm font-semibold text-white">
        Preguntas
       </div>
      </div>
      <div class="bg-white/15 rounded-lg md:rounded-xl p-3 md:p-4 backdrop-blur border-3 border-yellow-400" style="border-color: #FFD700;">
       <div class="text-2xl md:text-3xl mb-1" aria-hidden="true">
        üéÆ
       </div>
       <div class="text-xl md:text-2xl font-bold text-white">
        5
       </div>
       <div class="text-xs md:text-sm font-semibold text-white">
        Casos Juego
       </div>
      </div>
      <div class="bg-white/15 rounded-lg md:rounded-xl p-3 md:p-4 backdrop-blur border-3 border-yellow-400" style="border-color: #FFD700;">
       <div class="text-2xl md:text-3xl mb-1" aria-hidden="true">
        üßÆ
       </div>
       <div class="text-xl md:text-2xl font-bold text-white">
        1
       </div>
       <div class="text-xs md:text-sm font-semibold text-white">
        Calculadora
       </div>
      </div>
     </div>
     <div class="space-y-3 w-full"><button onclick="startCourse()" class="px-6 md:px-8 py-3 md:py-4 font-display text-base md:text-lg rounded-full shadow-lg transition-all transform hover:scale-105 w-full border-3 border-yellow-400" style="background: linear-gradient(135deg, #1d3c50 0%, #618485 100%); color: white; font-weight: 900;"> üöÄ Comenzar Curso </button> <button onclick="openCalculator()" class="px-6 md:px-8 py-3 md:py-4 font-display text-base md:text-lg rounded-full shadow-lg transition-all transform hover:scale-105 w-full border-3" style="background: rgba(255, 215, 0, 0.15); color: #FFD700; font-weight: 900; border-color: #FFD700;"> üßÆ Ir a Calculadora Directa </button> <button onclick="openGlossary()" class="px-6 md:px-8 py-3 md:py-4 font-display text-base md:text-lg rounded-full shadow-lg transition-all transform hover:scale-105 w-full border-3" style="background: rgba(255, 255, 255, 0.1); color: white; font-weight: 900; border-color: #FFD700;"> üìñ Consultar Glosario </button>
     </div>
    </main>
   </div><!-- Course Content -->
   <div id="course-screen" class="min-h-full hidden pb-32"><!-- Progress Bar -->
    <div class="sticky top-0 z-50 inc-header px-3 md:px-4 py-2 md:py-3" style="background: linear-gradient(135deg, #1d3c50 0%, rgba(29, 60, 80, 0.95) 100%); border-bottom: 4px solid #618485;">
     <div class="max-w-4xl mx-auto">
      <div class="flex items-center justify-between mb-2 md:mb-3 flex-wrap gap-2"><span class="text-xs md:text-sm font-bold text-white">Progreso</span> <span id="progress-text" class="text-xs md:text-sm font-bold text-white" style="color: #FFD700;">0 / 8</span>
      </div>
      <div class="progress-bar-inc">
       <div id="progress-bar" class="progress-bar-inc-fill progress-fill rounded-full" style="width: 0%"></div>
      </div>
     </div>
    </div><!-- Quick Navigation - Top Left -->
    <div class="quick-nav"><button onclick="openGlossary()" class="quick-nav-btn" title="Abrir Glosario" aria-label="Abrir Glosario">üìñ</button> <button onclick="openCalculator()" class="quick-nav-btn" title="Abrir Calculadora" aria-label="Abrir Calculadora">üßÆ</button> <button onclick="backToHome()" class="quick-nav-btn" title="Volver al Inicio" aria-label="Volver al Inicio">üè†</button>
    </div><!-- Slide Content -->
    <main id="slide-container" class="max-w-4xl mx-auto p-3 md:p-6 pt-4 md:pt-8"><!-- Slides rendered here -->
    </main><!-- Navigation -->
    <div class="fixed bottom-0 left-0 right-0 bg-gray-900/95 backdrop-blur border-t px-3 md:px-4 py-3 md:py-4 border-t-4 z-50" style="border-color: #618485;">
     <div class="max-w-4xl mx-auto flex items-center justify-between gap-2 md:gap-4 flex-wrap"><button id="prev-btn" onclick="prevSlide()" class="px-3 md:px-6 py-2 md:py-3 bg-gray-700 text-white rounded-lg font-semibold hover:bg-gray-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed border-2 border-gray-600 text-xs md:text-base"> ‚Üê Anterior </button>
      <div id="slide-dots" class="flex gap-1 md:gap-2" role="tablist" aria-label="Navegaci√≥n de diapositivas"><!-- Dots rendered dynamically -->
      </div><button id="next-btn" onclick="nextSlide()" class="px-3 md:px-6 py-2 md:py-3 rounded-lg font-display font-bold transition-all border-3 border-yellow-400 text-xs md:text-base" style="background: linear-gradient(135deg, #1d3c50 0%, #618485 100%); color: white;"> Siguiente ‚Üí </button>
     </div>
    </div>
   </div><!-- Calculator Screen -->
   <div id="calculator-screen" class="min-h-full hidden pb-8">
    <div class="sticky top-0 z-50 inc-header px-3 md:px-4 py-3" style="background: linear-gradient(135deg, #1d3c50 0%, rgba(29, 60, 80, 0.95) 100%); border-bottom: 4px solid #618485;">
     <div class="max-w-6xl mx-auto flex items-center justify-between flex-wrap gap-2">
      <h2 class="font-display text-lg md:text-2xl font-bold text-white">üßÆ Calculadora</h2><button onclick="closeCalculator()" class="px-3 md:px-4 py-2 md:py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-all border-2 border-gray-600 text-xs md:text-base"> ‚úï Cerrar </button>
     </div>
    </div>
    <main id="calculator-container" class="max-w-6xl mx-auto p-3 md:p-6"><!-- Calculator content rendered here -->
    </main>
   </div><!-- Planning Game Screen -->
   <div id="planning-game-screen" class="min-h-full hidden pb-8">
    <div class="sticky top-0 z-50 inc-header px-3 md:px-4 py-3" style="background: linear-gradient(135deg, #1d3c50 0%, rgba(29, 60, 80, 0.95) 100%); border-bottom: 4px solid #618485;">
     <div class="max-w-5xl mx-auto flex items-center justify-between flex-wrap gap-2">
      <h2 class="font-display text-lg md:text-2xl font-bold text-white">üéÆ Juego Planeaci√≥n</h2><span class="text-white font-bold border-2 border-yellow-400 px-3 md:px-4 py-2 rounded-lg text-xs md:text-base" style="color: #FFD700;">Puntos: <span id="game-score">0</span></span>
     </div>
    </div>
    <main id="planning-game-container" class="max-w-5xl mx-auto p-3 md:p-6"><!-- Game content rendered here -->
    </main>
   </div><!-- Quiz Screen -->
   <div id="quiz-screen" class="min-h-full hidden pb-8">
    <main id="quiz-container" class="max-w-3xl mx-auto p-3 md:p-6"><!-- Quiz content rendered here -->
    </main>
   </div><!-- Results Screen -->
   <div id="results-screen" class="min-h-full hidden flex items-center justify-center p-3 md:p-6">
    <main id="results-container" class="text-center max-w-2xl mx-auto w-full"><!-- Results rendered here -->
    </main>
   </div><!-- User Data Screen -->
   <div id="user-data-screen" class="min-h-full hidden flex items-center justify-center p-3 md:p-6">
    <main id="user-data-container" class="text-center max-w-2xl mx-auto w-full"><!-- User data form rendered here -->
    </main>
   </div><!-- Certificate Screen -->
   <div id="certificate-screen" class="min-h-full hidden flex items-center justify-center p-3 md:p-6">
    <main id="certificate-container" class="w-full max-w-4xl"><!-- Certificate rendered here -->
    </main>
   </div><!-- Publication Exercise Screen -->
   <div id="exercise-screen" class="min-h-full hidden pb-8">
    <div class="sticky top-0 z-50 inc-header px-3 md:px-4 py-3" style="background: linear-gradient(135deg, #1d3c50 0%, rgba(29, 60, 80, 0.95) 100%); border-bottom: 4px solid #618485;">
     <div class="max-w-5xl mx-auto flex items-center justify-between flex-wrap gap-2">
      <h2 class="font-display text-lg md:text-2xl font-bold text-white">üìã Ejercicio Pr√°ctico</h2><button onclick="closeExercise()" class="px-3 md:px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-all border-2 border-gray-600 text-xs md:text-base"> ‚úï Cerrar </button>
     </div>
    </div>
    <main id="exercise-container" class="max-w-5xl mx-auto p-3 md:p-6"><!-- Exercise content rendered here -->
    </main>
   </div><!-- Glossary Modal -->
   <div id="glossary-modal" class="glossary-modal">
    <div class="glossary-content">
     <div class="flex items-center justify-between mb-4 flex-wrap gap-2">
      <h2 class="font-display text-lg md:text-2xl font-bold">üìñ Glosario Editorial</h2><button onclick="closeGlossary()" class="text-2xl font-bold cursor-pointer hover:opacity-70">‚úï</button>
     </div>
     <div class="mb-4"><input type="text" id="glossary-search" placeholder="Buscar t√©rmino..." class="w-full px-4 py-3 border-2 rounded-lg font-semibold text-sm md:text-base" style="border-color: #1d3c50;" onkeyup="filterGlossary()">
     </div>
     <div id="glossary-entries"><!-- Entries rendered here -->
     </div>
    </div>
   </div>
  </div>
  <script>
    // Glosario completo de t√©rminos
    const glossaryTerms = [
      {
        term: "Actos legislativos",
        definition: "Documentos que modifican la Constituci√≥n Pol√≠tica. Requieren procesos especiales de aprobaci√≥n en el Congreso de la Rep√∫blica. Se publican en el Diario Oficial para garantizar su vigencia."
      },
      {
        term: "Art√≠culo",
        definition: "Unidad fundamental de un decreto, resoluci√≥n u otro acto administrativo que establece una norma, disposici√≥n u orden. Cada art√≠culo es numerado secuencialmente y constituye una idea jur√≠dica completa."
      },
      {
        term: "Cierre de Recepci√≥n",
        definition: "Hora l√≠mite del d√≠a h√°bil (3:00 p.m.) hasta la cual la Imprenta Nacional acepta documentos para su publicaci√≥n en el Diario Oficial. Los documentos recibidos despu√©s de esta hora se consideran recibidos al primer momento del siguiente d√≠a h√°bil."
      },
      {
        term: "Correcci√≥n Ortotipogr√°fica",
        definition: "Proceso de verificaci√≥n y enmienda de errores ortogr√°ficos, gramaticales y de formato en el texto, sin modificar el sentido o intenci√≥n legal del acto. Es el 40.9% del tiempo de producci√≥n."
      },
      {
        term: "Decretos con fuerza de Ley",
        definition: "Actos legislativos expedidos por el Ejecutivo con car√°cter excepcional en materias de econom√≠a, hacienda p√∫blica y organizaci√≥n administrativa, autorizados por el Congreso. Tienen rango de ley."
      },
      {
        term: "Diagramaci√≥n",
        definition: "Proceso de distribuci√≥n y organizaci√≥n del texto en la p√°gina final, respetando normas editoriales de la Imprenta Nacional. Var√≠a seg√∫n la complejidad: textos simples (27 p√°g/h) o con tablas/gr√°ficos (20 p√°g/h)."
      },
      {
        term: "Digitalizaci√≥n",
        definition: "Conversi√≥n de documentos originales a archivos digitales procesables. Las tasas var√≠an: Word (20 p√°g/h), Escaneado OCR (10 p√°g/h), Digitaci√≥n manual (5 p√°g/h)."
      },
      {
        term: "Diario Oficial",
        definition: "Medio oficial de publicaci√≥n de normas, decretos, resoluciones y actos administrativos del Estado colombiano. Garantiza publicidad, legalidad y seguridad jur√≠dica. Administrado por la Imprenta Nacional de Colombia."
      },
      {
        term: "Inoponibilidad",
        definition: "Condici√≥n de una norma que no ha sido publicada efectivamente en el Diario Oficial. Una norma inoponible no puede exigirse su cumplimiento a los ciudadanos, aunque tenga una fecha de edici√≥n anterior."
      },
      {
        term: "Seguridad Jur√≠dica",
        definition: "Garant√≠a de que las normas administrativas son accesibles, claras y est√°n plenamente vigentes cuando se publican. La Imprenta Nacional es responsable de mantener esta seguridad."
      }
    ];

    const productionStandards = {
      digitalization: {
        word: 20,
        scanned: 10,
        manual: 5
      },
      diagramming: {
        textOnly: 27,
        withTables: 20
      },
      correction: {
        standard: 10
      },
      industrial: {
        basePagesStandard: 130,
        baseHoursStandard: 86.9833
      }
    };

    const directives = {
      anticipation: {
        small: 6,
        medium: 10,
        large: 15
      },
      receptionHours: {
        open: 8,
        close: 15
      },
      articleClassification: {
        small: 20,
        medium: 50
      }
    };

    function articlesToPagesEstimate(articles) {
      return Math.ceil(articles * 0.67);
    }

    function getDifficultyCategory(articles) {
      if (articles <= directives.articleClassification.small) {
        return { category: 'low', name: 'BAJA', days: directives.anticipation.small };
      } else if (articles <= directives.articleClassification.medium) {
        return { category: 'medium', name: 'MEDIA', days: directives.anticipation.medium };
      } else {
        return { category: 'high', name: 'ALTA', days: directives.anticipation.large };
      }
    }

    function calculateProductionHours(pages, format, hasTables, currentHour, currentMinute) {
      const digitalizationRate = productionStandards.digitalization[format];
      const digitalizationHours = pages / digitalizationRate;
      const diagrammingRate = hasTables ? productionStandards.diagramming.withTables : productionStandards.diagramming.textOnly;
      const diagrammingHours = pages / diagrammingRate;
      const correctionHours = pages / productionStandards.correction.standard;
      const totalHours = digitalizationHours + diagrammingHours + correctionHours;

      let receivedNextDay = false;
      if (currentHour >= directives.receptionHours.close || (currentHour === directives.receptionHours.close - 1 && currentMinute > 0)) {
        receivedNextDay = true;
      }

      return {
        phases: {
          digitalization: digitalizationHours,
          diagramming: diagrammingHours,
          correction: correctionHours
        },
        total: totalHours,
        receivedNextDay: receivedNextDay
      };
    }

    function formatHours(hours) {
      const days = Math.floor(hours / 24);
      const remainingHours = Math.floor(hours % 24);
      const minutes = Math.round((hours % 1) * 60);

      if (days > 0) {
        return { days, hours: remainingHours, minutes, display: `${days}d ${remainingHours}h ${minutes}m` };
      } else if (remainingHours > 0) {
        return { days: 0, hours: remainingHours, minutes, display: `${remainingHours}h ${minutes}m` };
      } else {
        return { days: 0, hours: 0, minutes, display: `${minutes}m` };
      }
    }

    // Glossary Functions
    function openGlossary() {
      document.getElementById('glossary-modal').classList.add('active');
      renderGlossary();
      document.getElementById('glossary-search').focus();
    }

    function closeGlossary() {
      document.getElementById('glossary-modal').classList.remove('active');
    }

    function renderGlossary() {
      const container = document.getElementById('glossary-entries');
      container.innerHTML = glossaryTerms.map(item => `
        <div class="glossary-entry fade-enter">
          <div class="glossary-term">${item.term}</div>
          <div class="glossary-definition">${item.definition}</div>
        </div>
      `).join('');
    }

    function filterGlossary() {
      const searchTerm = document.getElementById('glossary-search').value.toLowerCase();
      const entries = document.querySelectorAll('.glossary-entry');
      
      entries.forEach(entry => {
        const term = entry.querySelector('.glossary-term').textContent.toLowerCase();
        const definition = entry.querySelector('.glossary-definition').textContent.toLowerCase();
        
        if (term.includes(searchTerm) || definition.includes(searchTerm)) {
          entry.style.display = 'block';
        } else {
          entry.style.display = 'none';
        }
      });
    }

    // Calculator functions
    function openCalculator() {
      document.getElementById('welcome-screen').classList.add('hidden');
      document.getElementById('course-screen').classList.add('hidden');
      document.getElementById('calculator-screen').classList.remove('hidden');
      renderCalculator();
    }

    function closeCalculator() {
      document.getElementById('calculator-screen').classList.add('hidden');
      document.getElementById('welcome-screen').classList.remove('hidden');
    }

    function renderCalculator() {
      const container = document.getElementById('calculator-container');
      
      container.innerHTML = `
        <div class="slide-enter">
          <div class="text-center mb-6 md:mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-full bg-gradient-to-br from-teal-400 to-teal-600 mb-4 pulse-glow border-4 border-yellow-400" style="border-color: #FFD700;">
              <span class="text-3xl md:text-4xl" aria-hidden="true">üßÆ</span>
            </div>
            <h2 class="font-display text-2xl md:text-3xl lg:text-4xl font-bold text-white mb-2">
              Calculadora de Planeaci√≥n Editorial
            </h2>
            <p class="text-gray-300 max-w-2xl mx-auto text-sm md:text-lg font-semibold">
              Calcula el tiempo de producci√≥n necesario para tu documento basado en criterios t√©cnicos reales de la Imprenta Nacional de Colombia.
            </p>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6 md:mb-8">
            <!-- Input Panel -->
            <div class="planning-card rounded-xl p-4 md:p-6">
              <h3 class="text-lg md:text-xl font-display font-bold text-white mb-4 md:mb-6" style="color: #FFD700;">üìã Informaci√≥n del Documento</h3>
              
              <div class="space-y-3 md:space-y-5">
                <!-- Articles Input -->
                <div>
                  <label for="calc-articles" class="block text-sm md:text-base font-semibold text-white mb-2">
                    üìÑ N√∫mero de Art√≠culos
                  </label>
                  <input type="number" id="calc-articles" min="1" max="500" value="25" 
                    class="planning-input w-full px-4 py-2 md:py-3 rounded-lg text-center text-sm md:text-base"
                    aria-describedby="articles-help"
                    onchange="updateCalculation()" onkeyup="updateCalculation()">
                  <div id="articles-help" class="text-xs text-gray-300 mt-2 font-semibold">
                    <span id="category-badge"></span>
                  </div>
                </div>

                <!-- Format Selection -->
                <div>
                  <label class="block text-sm md:text-base font-semibold text-white mb-2 md:mb-3">
                    üìÑ Formato Original del Documento
                  </label>
                  <div class="space-y-2">
                    <button class="option-button selected w-full border-2 rounded-lg p-3 md:p-4 text-left font-semibold text-sm md:text-base" onclick="selectFormat('word', this)" style="border-color: #FFD700; background: rgba(255, 215, 0, 0.1);">
                      <div class="font-semibold text-white">üìù Archivo Word (.docx)</div>
                      <div class="text-xs text-gray-300 mt-1 font-semibold">20 p√°ginas/hora ‚Ä¢ Est√°ndar √≥ptimo</div>
                    </button>
                    <button class="option-button w-full border-2 border-gray-600 rounded-lg p-3 md:p-4 text-left font-semibold text-sm md:text-base" onclick="selectFormat('scanned', this)">
                      <div class="font-semibold text-white">üñºÔ∏è Documento Escaneado (OCR)</div>
                      <div class="text-xs text-gray-300 mt-1 font-semibold">10 p√°ginas/hora ‚Ä¢ Requiere correcci√≥n</div>
                    </button>
                    <button class="option-button w-full border-2 border-gray-600 rounded-lg p-3 md:p-4 text-left font-semibold text-sm md:text-base" onclick="selectFormat('manual', this)">
                      <div class="font-semibold text-white">‚å®Ô∏è Texto Manual (Digitaci√≥n)</div>
                      <div class="text-xs text-gray-300 mt-1 font-semibold">5 p√°ginas/hora ‚Ä¢ M√°s lento pero preciso</div>
                    </button>
                  </div>
                  <input type="hidden" id="calc-format" value="word">
                </div>

                <!-- Tables/Graphics Selection -->
                <div>
                  <label class="block text-sm md:text-base font-semibold text-white mb-2 md:mb-3">
                    üìä Contenido del Documento
                  </label>
                  <div class="space-y-2">
                    <button class="option-button selected w-full border-2 rounded-lg p-3 md:p-4 text-left font-semibold text-sm md:text-base" onclick="selectContent('text', this)" style="border-color: #FFD700; background: rgba(255, 215, 0, 0.1);">
                      <div class="font-semibold text-white">üìù Solo Texto</div>
                      <div class="text-xs text-gray-300 mt-1 font-semibold">27 p√°ginas/hora ‚Ä¢ Diagramaci√≥n simple</div>
                    </button>
                    <button class="option-button w-full border-2 border-gray-600 rounded-lg p-3 md:p-4 text-left font-semibold text-sm md:text-base" onclick="selectContent('complex', this)">
                      <div class="font-semibold text-white">üìà Con Tablas, Gr√°ficos e Im√°genes</div>
                      <div class="text-xs text-gray-300 mt-1 font-semibold">20 p√°ginas/hora ‚Ä¢ Diagramaci√≥n compleja</div>
                    </button>
                  </div>
                  <input type="hidden" id="calc-content" value="text">
                </div>

                <!-- Submission Time -->
                <div>
                  <label class="block text-sm md:text-base font-semibold text-white mb-2">
                    üïì Hora de Radicaci√≥n (Env√≠o)
                  </label>
                  <div class="flex gap-2">
                    <div>
                      <label for="calc-hour" class="sr-only">Hora</label>
                      <input type="number" id="calc-hour" min="8" max="15" value="14" 
                        class="planning-input w-16 md:w-20 px-2 md:px-3 py-2 md:py-3 rounded-lg text-center text-sm md:text-base"
                        aria-label="Hora de env√≠o"
                        onchange="updateCalculation()" onkeyup="updateCalculation()">
                    </div>
                    <div>
                      <label for="calc-minute" class="sr-only">Minutos</label>
                      <input type="number" id="calc-minute" min="0" max="59" value="30" 
                        class="planning-input w-16 md:w-20 px-2 md:px-3 py-2 md:py-3 rounded-lg text-center text-sm md:text-base"
                        aria-label="Minutos de env√≠o"
                        onchange="updateCalculation()" onkeyup="updateCalculation()">
                    </div>
                  </div>
                  <div class="text-xs text-white mt-2 font-semibold">
                    Horario: 8:00 a.m. - 3:00 p.m. (Despu√©s cierre = d√≠a siguiente)
                  </div>
                </div>

                <!-- Closure Time Warning -->
                <div class="bg-red-600/30 border-2 border-red-600 rounded-lg p-3 md:p-4">
                  <div class="flex items-start gap-2 md:gap-3">
                    <span class="text-2xl md:text-3xl flex-shrink-0" aria-hidden="true">üö®</span>
                    <div>
                      <p class="text-sm md:text-base font-bold text-red-100 mb-1">Cierre de Recepci√≥n</p>
                      <p class="text-xs md:text-sm text-white font-semibold">
                        Documentos despu√©s de <strong>3:00 p.m. (15:00)</strong> se reciben el <strong>siguiente d√≠a h√°bil</strong>
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Results Panel -->
            <div class="space-y-3 md:space-y-4">
              <div class="calc-result-box rounded-lg p-4 md:p-5 border-3 border-yellow-400" style="background: linear-gradient(135deg, rgba(97, 132, 133, 0.15) 0%, rgba(97, 132, 133, 0.08) 100%);">
                <div class="text-xs text-gray-600 mb-1 font-semibold">Dificultad de Producci√≥n (por INC)</div>
                <div id="difficulty-display" class="flex items-center gap-3 mb-3">
                  <span class="difficulty-badge difficulty-low font-bold text-xs md:text-base">üü¢ BAJA</span>
                </div>
                <div id="difficulty-rule" class="text-xs text-gray-700 font-semibold">
                  Menos de 20 art√≠culos
                </div>
              </div>

              <div class="calc-result-box rounded-lg p-4 md:p-5 border-3 border-yellow-400" style="background: linear-gradient(135deg, rgba(97, 132, 133, 0.15) 0%, rgba(97, 132, 133, 0.08) 100%);">
                <div class="text-xs text-gray-600 mb-1 font-semibold">Tiempo de Producci√≥n (Estimado)</div>
                <div class="text-2xl md:text-3xl font-bold mb-1 font-display" style="color: #1d3c50;">8h 45m</div>
                <div class="text-xs text-gray-700 mt-2 font-semibold" id="production-time-display">
                  Digitalizaci√≥n + Diagramaci√≥n + Correcci√≥n
                </div>
              </div>

              <div class="calc-result-box rounded-lg p-4 md:p-5 border-3 border-yellow-400" style="background: linear-gradient(135deg, rgba(97, 132, 133, 0.15) 0%, rgba(97, 132, 133, 0.08) 100%);">
                <div class="text-xs text-gray-600 mb-1 font-semibold">Anticipaci√≥n Recomendada (Directiva 01/2025)</div>
                <div class="text-2xl md:text-3xl font-bold mb-1 font-display" style="color: #1d3c50;" id="recommended-days">6</div>
                <div class="text-xs text-gray-700 mt-2 font-semibold">
                  d√≠as h√°biles desde HOY
                </div>
              </div>

              <div class="calc-result-box rounded-lg p-4 md:p-5 border-3 border-yellow-400" style="background: linear-gradient(135deg, rgba(97, 132, 133, 0.15) 0%, rgba(97, 132, 133, 0.08) 100%);">
                <div class="text-xs text-gray-600 mb-1 font-semibold">¬øCu√°ndo Enviar M√°s Tarde?</div>
                <div id="latest-date-display" class="text-sm md:text-base font-semibold text-gray-800 mb-2">
                  En 6 d√≠as, hasta las 2:00 p.m.
                </div>
                <div class="text-xs text-gray-700 font-semibold">
                  Incluye 1 hora de buffer de seguridad
                </div>
              </div>

              <div class="info-panel rounded-lg p-3 md:p-4">
                <p class="text-xs md:text-sm font-semibold mb-2" style="color: #1d3c50;">‚ÑπÔ∏è Nota Importante:</p>
                <p class="text-xs md:text-sm text-gray-700 leading-relaxed font-semibold">
                  La dificultad de producci√≥n es determinada por la Imprenta Nacional seg√∫n criterios t√©cnicos (formato, contenido).
                </p>
              </div>

              <button onclick="exportCalculation()" class="w-full px-4 py-3 rounded-lg font-semibold transition-all border-2 border-yellow-400 text-sm md:text-base" style="background: linear-gradient(135deg, #1d3c50 0%, #618485 100%); color: white; font-weight: 900;">
                üì• Descargar Plan (TXT)
              </button>
            </div>
          </div>

          <div class="flex justify-center gap-2 md:gap-4 flex-wrap">
            <button onclick="closeCalculator()" class="px-4 md:px-6 py-2 md:py-3 bg-gray-700 text-white font-semibold rounded-lg hover:bg-gray-600 transition-all border-2 border-gray-600 text-sm md:text-base">
              ‚Üê Volver
            </button>
            <button onclick="startCourse()" class="px-4 md:px-6 py-2 md:py-3 rounded-lg font-display font-bold transition-all border-3 border-yellow-400 text-sm md:text-base" style="background: linear-gradient(135deg, #1d3c50 0%, #618485 100%); color: white;">
              üìö Ir al Curso
            </button>
          </div>
        </div>
      `;

      updateCalculation();
    }

    function selectFormat(format, button) {
      document.querySelectorAll('[onclick*="selectFormat"]').forEach(b => {
        b.classList.remove('selected');
        b.style.borderColor = '';
        b.style.background = '';
      });
      button.classList.add('selected');
      button.style.borderColor = '#FFD700';
      button.style.background = 'rgba(255, 215, 0, 0.1)';
      document.getElementById('calc-format').value = format;
      updateCalculation();
    }

    function selectContent(content, button) {
      document.querySelectorAll('[onclick*="selectContent"]').forEach(b => {
        b.classList.remove('selected');
        b.style.borderColor = '';
        b.style.background = '';
      });
      button.classList.add('selected');
      button.style.borderColor = '#FFD700';
      button.style.background = 'rgba(255, 215, 0, 0.1)';
      document.getElementById('calc-content').value = content;
      updateCalculation();
    }

    function updateCalculation() {
      const articles = parseInt(document.getElementById('calc-articles').value) || 1;
      const format = document.getElementById('calc-format').value || 'word';
      const content = document.getElementById('calc-content').value || 'text';
      const hour = parseInt(document.getElementById('calc-hour').value) || 14;
      const minute = parseInt(document.getElementById('calc-minute').value) || 0;

      const difficulty = getDifficultyCategory(articles);
      
      const badgeClass = difficulty.category === 'low' ? 'difficulty-low' : difficulty.category === 'medium' ? 'difficulty-medium' : 'difficulty-high';
      const badgeEmoji = difficulty.category === 'low' ? 'üü¢' : difficulty.category === 'medium' ? 'üü°' : 'üî¥';
      document.getElementById('difficulty-display').innerHTML = `<span class="difficulty-badge ${badgeClass} font-bold text-xs md:text-base">${badgeEmoji} ${difficulty.name}</span>`;
      
      let rule = '';
      if (articles <= 20) rule = 'Menos de 20 art√≠culos (‚âà 13 p√°ginas)';
      else if (articles <= 50) rule = '21-50 art√≠culos (‚âà 14-33 p√°ginas)';
      else rule = 'M√°s de 50 art√≠culos (‚âà 33+ p√°ginas)';
      document.getElementById('difficulty-rule').textContent = rule;

      const pages = articlesToPagesEstimate(articles);
      const hasTables = content === 'complex';
      const production = calculateProductionHours(pages, format, hasTables, hour, minute);
      const timeDisplay = formatHours(production.total);
      
      const prodTimeDisplay = document.querySelector('#production-time-display');
      if (prodTimeDisplay) {
        prodTimeDisplay.innerHTML = `<div class="text-2xl md:text-3xl font-bold" style="color: #1d3c50;">${timeDisplay.display}</div><div class="text-xs mt-2">Digitalizaci√≥n + Diagramaci√≥n + Correcci√≥n</div>`;
      }

      document.getElementById('recommended-days').textContent = difficulty.days;

      let anticipatedDays = difficulty.days;
      if (production.receivedNextDay) {
        anticipatedDays += 1;
      }

      const today = new Date();
      let businessDaysToAdd = anticipatedDays;
      let currentDate = new Date(today);
      while (businessDaysToAdd > 0) {
        currentDate.setDate(currentDate.getDate() + 1);
        if (currentDate.getDay() !== 0 && currentDate.getDay() !== 6) {
          businessDaysToAdd--;
        }
      }

      const dateStr = currentDate.toLocaleDateString('es-CO', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
      document.getElementById('latest-date-display').textContent = `${dateStr}, hasta las 2:00 p.m.`;
    }

    function exportCalculation() {
      const articles = document.getElementById('calc-articles').value;
      const format = document.getElementById('calc-format').value;
      const content = document.getElementById('calc-content').value;
      const difficulty = getDifficultyCategory(parseInt(articles));

      const text = `PLAN DE ENV√çO - DIARIO OFICIAL DE COLOMBIA
======================================================

DOCUMENTO:
- Art√≠culos: ${articles}
- P√°ginas estimadas: ${articlesToPagesEstimate(parseInt(articles))}
- Dificultad (INC): ${difficulty.name}
- Formato: ${format === 'word' ? 'Word' : format === 'scanned' ? 'Escaneado (OCR)' : 'Manual'}
- Contenido: ${content === 'text' ? 'Solo texto' : 'Con tablas/gr√°ficos'}

Generado: ${new Date().toLocaleString('es-CO')}
      `;

      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
      element.setAttribute('download', `plan_publicacion_${articles}_articulos.txt`);
      element.style.display = 'none';
      document.body.appendChild(element);
      element.click();
      document.body.removeChild(element);
    }

    // Course Data
    const slides = [
      {
        id: 1,
        title: "¬øQu√© es el Diario Oficial?",
        icon: "üìú",
        color: "from-teal-500 to-teal-700",
        content: [
          {
            subtitle: "Misi√≥n Institucional",
            icon: "üèõÔ∏è",
            text: "El Diario Oficial es el instrumento mediante el cual la Imprenta Nacional de Colombia cumple su misi√≥n legal (Ley 109 de 1994) de promulgar la legislaci√≥n y garantizar la seguridad jur√≠dica del Estado."
          },
          {
            subtitle: "Validez y Publicidad",
            icon: "‚öñÔ∏è",
            text: "Seg√∫n la Constituci√≥n Pol√≠tica (Art. 209) y las leyes 489 de 1998 y 1437 de 2011, la publicaci√≥n es un requisito indispensable para que los actos administrativos sean oponibles, vigentes y obligatorios."
          },
          {
            subtitle: "Garant√≠a Ciudadana",
            icon: "üë•",
            text: "No es solo un registro; es el medio que permite a la ciudadan√≠a conocer las normas que los rigen para ejercer control o reclamar derechos."
          }
        ],
        quiz: {
          question: "¬øCu√°l es la ley que establece la misi√≥n de la Imprenta Nacional?",
          options: ["Ley 489 de 1998", "Ley 109 de 1994", "Ley 1437 de 2011", "Constituci√≥n Art. 209"],
          correct: 1
        }
      },
      {
        id: 2,
        title: "Anatom√≠a de la Publicaci√≥n",
        icon: "‚öôÔ∏è",
        color: "from-purple-500 to-purple-700",
        content: [
          {
            subtitle: "1. Recepci√≥n y Verificaci√≥n",
            icon: "üìã",
            text: "Se revisa que el documento cumpla con los requisitos legales y t√©cnicos."
          },
          {
            subtitle: "2. Programaci√≥n",
            icon: "üìä",
            text: "Se asigna una orden de producci√≥n y se crea la hoja de ruta."
          },
          {
            subtitle: "3. Digitalizaci√≥n",
            icon: "üíª",
            text: "Los archivos se convierten seg√∫n su formato y se les asignan estilos editoriales."
          },
          {
            subtitle: "4. Correcci√≥n",
            icon: "‚úèÔ∏è",
            text: "Revisi√≥n rigurosa de ortograf√≠a y formato sin cambiar el sentido de la ley."
          },
          {
            subtitle: "5. Cierre y Cargue",
            icon: "üöÄ",
            text: "Verificaci√≥n final antes de publicar en el portal web."
          }
        ],
        quiz: {
          question: "¬øEn qu√© formatos se deben recibir los documentos?",
          options: ["Word y Excel", "PDF y .txt", "HTML y CSS", "JPG y PNG"],
          correct: 1
        }
      },
      {
        id: 3,
        title: "El Riesgo de la Producci√≥n Tard√≠a",
        icon: "‚ö†Ô∏è",
        color: "from-red-500 to-red-700",
        content: [
          {
            subtitle: "Proceso Humano y T√©cnico",
            icon: "üë∑",
            text: "Un diario est√°ndar de 130 p√°ginas requiere aproximadamente 87 horas de trabajo, involucrando a un equipo de hasta 17 personas."
          },
          {
            subtitle: "Control de Calidad",
            icon: "üîç",
            text: "La revisi√≥n no puede saltarse; se debe cotejar cada palabra del original contra el archivo procesado."
          },
          {
            subtitle: "Capacidad Instalada",
            icon: "üìà",
            text: "Existen est√°ndares diarios de producci√≥n por trabajador; el exceso de documentos de √∫ltima hora genera cuellos de botella."
          }
        ],
        highlight: {
          icon: "üö®",
          text: "La correcci√≥n ortotipogr√°fica representa el 40.9% del tiempo total de producci√≥n - es el mayor cuello de botella del proceso."
        },
        quiz: {
          question: "¬øCu√°ntas horas aproximadamente requiere un diario est√°ndar de 130 p√°ginas?",
          options: ["24 horas", "48 horas", "87 horas", "120 horas"],
          correct: 2
        }
      },
      {
        id: 4,
        title: "Cronograma de Cierre",
        icon: "üïì",
        color: "from-green-500 to-green-700",
        content: [
          {
            subtitle: "Hora de Cierre Ordinaria",
            icon: "‚è∞",
            text: "La recepci√≥n de documentos se cierra diariamente a las 3:00 p.m. (15:00 horas)."
          },
          {
            subtitle: "Regla del D√≠a H√°bil",
            icon: "üìÖ",
            text: "Cualquier documento recibido despu√©s de las 3:00 p.m. se entender√° recibido al primer momento del siguiente d√≠a h√°bil."
          },
          {
            subtitle: "Sincronizaci√≥n Obligatoria",
            icon: "üîÑ",
            text: "La Imprenta tiene el deber de gestionar que el cargue en la web y la fecha de la edici√≥n sean el mismo d√≠a para asegurar la certeza de la vigencia normativa."
          }
        ],
        highlight: {
          icon: "‚ö°",
          text: "Orden judicial del Consejo de Estado: La fecha del Diario debe coincidir exactamente con la publicaci√≥n efectiva en web."
        },
        quiz: {
          question: "¬øA qu√© hora se cierra la recepci√≥n ordinaria de documentos?",
          options: ["2:00 p.m.", "3:00 p.m.", "4:00 p.m.", "6:00 p.m."],
          correct: 1
        }
      },
      {
        id: 5,
        title: "Buenas Pr√°cticas de Planeaci√≥n",
        icon: "üìã",
        color: "from-cyan-500 to-cyan-700",
        content: [
          {
            subtitle: "Menos de 20 art√≠culos",
            icon: "üìÑ",
            text: "Radicar con 6 d√≠as h√°biles de antelaci√≥n (Directiva Presidencial 01/2025)."
          },
          {
            subtitle: "Entre 21 y 50 art√≠culos",
            icon: "üìë",
            text: "Radicar con 10 d√≠as h√°biles de antelaci√≥n."
          },
          {
            subtitle: "M√°s de 50 art√≠culos",
            icon: "üìö",
            text: "Radicar con 15 d√≠as h√°biles de antelaci√≥n."
          }
        ],
        highlight: {
          icon: "üìú",
          text: "Directiva Presidencial 01 de 2025: Las oficinas jur√≠dicas deben anticipar el impacto de sus publicaciones seg√∫n estas recomendaciones."
        },
        quiz: {
          question: "¬øCon cu√°ntos d√≠as de antelaci√≥n se debe radicar un documento de m√°s de 50 art√≠culos?",
          options: ["6 d√≠as h√°biles", "10 d√≠as h√°biles", "15 d√≠as h√°biles", "20 d√≠as h√°biles"],
          correct: 2
        }
      },
      {
        id: 6,
        title: "Consecuencias del Incumplimiento",
        icon: "‚öñÔ∏è",
        color: "from-orange-500 to-orange-700",
        content: [
          {
            subtitle: "Inoponibilidad",
            icon: "üö´",
            text: "Una norma que no ha sido cargada efectivamente en la web es inoponible; es decir, no puede exigirse su cumplimiento a los ciudadanos."
          },
          {
            subtitle: "Seguridad Jur√≠dica",
            icon: "‚öñÔ∏è",
            text: "La disparidad entre la fecha del diario y el cargue real afecta la legalidad."
          },
          {
            subtitle: "Responsabilidad Administrativa",
            icon: "‚ö°",
            text: "El retraso puede derivar en incidentes de desacato, multas y procesos disciplinarios para los funcionarios responsables."
          }
        ],
        highlight: {
          icon: "üî¥",
          text: "¬°El cumplimiento de los plazos protege tanto a las entidades como a los ciudadanos y la integridad jur√≠dica del Estado!"
        },
        quiz: {
          question: "¬øQu√© significa que una norma sea 'inoponible'?",
          options: [
            "Que es muy importante",
            "Que no puede exigirse su cumplimiento aunque tenga fecha anterior",
            "Que est√° bien publicada",
            "Que tiene muchas p√°ginas"
          ],
          correct: 1
        }
      },
      {
        id: 7,
        title: "Compromiso Institucional",
        icon: "ü§ù",
        color: "from-indigo-500 to-indigo-700",
        content: [
          {
            subtitle: "Cultura de Calidad",
            icon: "‚ú®",
            text: "\"Comunicar con transparencia es la mejor impresi√≥n\" - Este es el principio fundamental que gu√≠a todas las acciones de la Imprenta Nacional de Colombia."
          },
          {
            subtitle: "Llamado a la Acci√≥n",
            icon: "üéØ",
            text: "La integridad de la memoria jur√≠dica del pa√≠s no depende solo de la Imprenta Nacional, sino de la planificaci√≥n oportuna de todas las entidades del Estado."
          },
          {
            subtitle: "Meta Com√∫n",
            icon: "üéØ",
            text: "Lograr que cada decreto y resoluci√≥n llegue al ciudadano de forma oportuna, fidedigna y bajo los m√°s altos est√°ndares t√©cnicos es responsabilidad compartida."
          }
        ],
        highlight: {
          icon: "üèÜ",
          text: "¬°Corresponsabilidad: La transparencia jur√≠dica es un compromiso de todas las instituciones!"
        },
        quiz: {
          question: "¬øDe qui√©n depende la integridad de la memoria jur√≠dica del pa√≠s?",
          options: [
            "Solo de la Imprenta Nacional",
            "Solo de las entidades emisoras",
            "De la planeaci√≥n de todas las entidades del Estado",
            "Del poder judicial exclusivamente"
          ],
          correct: 2
        }
      },
      {
        id: 8,
        title: "Pr√≥ximo: Juego y Ejercicio Pr√°ctico",
        icon: "üéÆ",
        color: "from-pink-500 to-pink-700",
        content: [
          {
            subtitle: "¬øEst√°s listo?",
            icon: "üöÄ",
            text: "Ahora tendr√°s la oportunidad de poner en pr√°ctica tus conocimientos en dos espacios: un emocionante juego de planeaci√≥n editorial y un ejercicio de publicaci√≥n real."
          },
          {
            subtitle: "Juego: Eval√∫a Documentos",
            icon: "üéØ",
            text: "Como servidor p√∫blico, deber√°s evaluar si documentos con diferentes caracter√≠sticas pueden ser publicados en los tiempos requeridos."
          },
          {
            subtitle: "Ejercicio: Publica tu Propio Documento",
            icon: "üì∞",
            text: "Completa un formulario de publicaci√≥n realista. Deber√°s llenar todos los datos necesarios, evaluar variables cr√≠ticas y tomar decisiones profesionales."
          }
        ],
        highlight: {
          icon: "üí°",
          text: "¬°Prep√°rate para demostrar que eres un experto en planeaci√≥n editorial responsable!"
        },
        quiz: {
          question: "Antes de jugar, ¬øcu√°l es el objetivo principal del ejercicio pr√°ctico?",
          options: [
            "Obtener la puntuaci√≥n m√°s alta",
            "Completar un formulario realista de publicaci√≥n y tomar decisiones profesionales",
            "Generar m√°s documentos posibles",
            "Verificar formatos de archivos"
          ],
          correct: 1
        }
      }
    ];

    const planningScenarios = [
      {
        id: 1,
        title: "Caso 1: Decreto Simple en Formato √ìptimo",
        description: "Un decreto de 12 art√≠culos en Word se env√≠a a las 2:45 p.m. hoy, solo texto.",
        articles: 12,
        format: "word",
        content: "text",
        timeHour: 14,
        timeMinute: 45,
        dayOffset: 0,
        correct: true,
        feedback: "‚úÖ ¬°CORRECTO! Documento recibido antes de 3 p.m., formato √≥ptimo. Solo necesita 6 d√≠as h√°biles.",
        difficulty: "easy"
      },
      {
        id: 2,
        title: "Caso 2: L√≠mite Cr√≠tico de Cierre",
        description: "Una resoluci√≥n de 35 art√≠culos en escaneado (OCR) se env√≠a a las 3:15 p.m. hoy.",
        articles: 35,
        format: "scanned",
        content: "complex",
        timeHour: 15,
        timeMinute: 15,
        dayOffset: 0,
        correct: false,
        feedback: "‚ùå RIESGO DETECTADO: Se recibe despu√©s de 3 p.m. = siguiente d√≠a. Con 35 art√≠culos necesita 10 d√≠as h√°biles.",
        difficulty: "medium"
      },
      {
        id: 3,
        title: "Caso 3: Complejidad Alta Bien Planificada",
        description: "Un decreto de 65 art√≠culos en Word con tablas se env√≠a hoy a las 2:30 p.m., pero fue planificado 14 d√≠as antes.",
        articles: 65,
        format: "word",
        content: "complex",
        timeHour: 14,
        timeMinute: 30,
        daysPlannedAhead: 14,
        dayOffset: 0,
        correct: true,
        feedback: "‚úÖ ¬°EXCELENTE PLANEACI√ìN! Requiere 15 d√≠as pero se envi√≥ con 14 de anticipaci√≥n + buffer del mismo d√≠a.",
        difficulty: "hard"
      },
      {
        id: 4,
        title: "Caso 4: Sorpresa Manual en √öltimo Minuto",
        description: "Una enmienda urgente de 8 art√≠culos llega como texto manuscrito a digitalizar a las 3:02 p.m.",
        articles: 8,
        format: "manual",
        content: "text",
        timeHour: 15,
        timeMinute: 2,
        dayOffset: 0,
        urgent: true,
        correct: false,
        feedback: "‚ùå CRISIS INMINENTE: Llega 2 min despu√©s del cierre + formato manual (5 p√°g/h). T√©cnicamente se recibe ma√±ana.",
        difficulty: "hard"
      },
      {
        id: 5,
        title: "Caso 5: Planificaci√≥n Quir√∫rgica",
        description: "Una resoluci√≥n de 28 art√≠culos en Word sin elementos complejos, enviada 11 d√≠as antes, radicada a las 2:20 p.m.",
        articles: 28,
        format: "word",
        content: "text",
        timeHour: 14,
        timeMinute: 20,
        daysPlannedAhead: 11,
        dayOffset: 0,
        correct: true,
        feedback: "‚úÖ ¬°PERFECTO! Planeaci√≥n impecable: 11 d√≠as para documento de 28 art√≠culos (requiere 10 m√≠n), formato √≥ptimo.",
        difficulty: "medium"
      }
    ];

    // State
    let currentSlide = 0;
    let quizAnswers = {};
    let courseCompleted = false;
    let planningGameScore = 0;
    let currentPlanningCase = 0;
    let planningAnswers = {};
    let progressData = [];
    let quizPercentage = 0;
    let userData = {};

    // SDK Initialization
    async function initSDKs() {
      if (window.elementSdk) {
        await window.elementSdk.init({
          defaultConfig: {
            course_title: "Curso: El Diario Oficial",
            welcome_message: "Bienvenido al curso interactivo sobre el Diario Oficial de Colombia"
          },
          onConfigChange: async (newConfig) => {
            // Apply config changes
          },
          mapToCapabilities: () => ({
            recolorables: [],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (cfg) => new Map([
            ["course_title", cfg.course_title || "Curso: El Diario Oficial"],
            ["welcome_message", cfg.welcome_message || "Bienvenido al curso..."]
          ])
        });
      }

      if (window.dataSdk) {
        const result = await window.dataSdk.init({
          onDataChanged: (data) => {
            progressData = data;
          }
        });
        if (!result.isOk) {
          console.error("Failed to initialize Data SDK");
        }
      }
    }

    // Navigation Functions
    function startCourse() {
      document.getElementById('welcome-screen').classList.add('hidden');
      document.getElementById('calculator-screen').classList.add('hidden');
      document.getElementById('course-screen').classList.remove('hidden');
      renderSlide();
      updateProgress();
    }

    function backToHome() {
      document.getElementById('course-screen').classList.add('hidden');
      document.getElementById('welcome-screen').classList.remove('hidden');
      currentSlide = 0;
    }

    function renderSlide() {
      const slide = slides[currentSlide];
      const container = document.getElementById('slide-container');
      
      let contentHTML = slide.content.map((item, idx) => `
        <div class="bg-white/15 backdrop-blur rounded-lg md:rounded-xl p-3 md:p-6 card-hover fade-enter border-l-4 border-yellow-400" style="animation-delay: ${idx * 0.1}s">
          <div class="flex items-start gap-2 md:gap-4">
            <div class="text-3xl md:text-4xl flex-shrink-0" aria-hidden="true">${item.icon}</div>
            <div>
              <h3 class="font-display-bold text-base md:text-lg text-white mb-2 font-bold" style="color: #FFD700;">${item.subtitle}</h3>
              <p class="text-white leading-relaxed font-semibold text-sm md:text-base">${item.text}</p>
            </div>
          </div>
        </div>
      `).join('');

      if (slide.highlight) {
        contentHTML += `
          <div class="mt-4 md:mt-6 bg-gradient-to-r from-teal-600/40 to-cyan-600/40 border-3 border-yellow-400 rounded-lg md:rounded-xl p-4 md:p-6 fade-enter" style="animation-delay: 0.4s">
            <div class="flex items-center gap-3 md:gap-4">
              <div class="text-4xl md:text-5xl flex-shrink-0" aria-hidden="true">${slide.highlight.icon}</div>
              <p class="text-white font-display-bold text-base md:text-lg font-bold" style="color: #FFD700;">${slide.highlight.text}</p>
            </div>
          </div>
        `;
      }

      container.innerHTML = `
        <div class="slide-enter">
          <div class="text-center mb-6 md:mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 md:w-24 md:h-24 rounded-full bg-gradient-to-br ${slide.color} mb-4 shadow-lg pulse-glow border-4 border-yellow-400" style="border-color: #FFD700;">
              <span class="text-3xl md:text-5xl" aria-hidden="true">${slide.icon}</span>
            </div>
            <h2 class="font-display text-2xl md:text-3xl lg:text-4xl font-bold text-white mb-2">
              ${slide.title}
            </h2>
            <p class="text-gray-300 text-xs md:text-lg font-semibold">M√≥dulo ${slide.id} de ${slides.length}</p>
          </div>
          
          <div class="space-y-3 md:space-y-4">
            ${contentHTML}
          </div>
        </div>
      `;

      document.getElementById('prev-btn').disabled = currentSlide === 0;
      
      const nextBtn = document.getElementById('next-btn');
      if (currentSlide === slides.length - 1) {
        nextBtn.textContent = 'üéØ Ir al Quiz';
      } else {
        nextBtn.textContent = 'Siguiente ‚Üí';
      }

      renderDots();
    }

    function renderDots() {
      const dotsContainer = document.getElementById('slide-dots');
      dotsContainer.innerHTML = slides.map((_, idx) => `
        <button onclick="goToSlide(${idx})" role="tab" aria-selected="${idx === currentSlide}" class="w-3 h-3 md:w-4 md:h-4 rounded-full transition-all" style="background: ${idx === currentSlide ? '#FFD700' : 'rgba(255, 215, 0, 0.3)'}; border: 2px solid ${idx === currentSlide ? '#FFD700' : 'rgba(255, 215, 0, 0.5)'}"></button>
      `).join('');
    }

    function updateProgress() {
      const progress = ((currentSlide + 1) / slides.length) * 100;
      document.getElementById('progress-bar').style.width = `${progress}%`;
      document.getElementById('progress-text').textContent = `${currentSlide + 1} / ${slides.length}`;
    }

    function nextSlide() {
      if (currentSlide < slides.length - 1) {
        currentSlide++;
        renderSlide();
        updateProgress();
      } else {
        startQuiz();
      }
    }

    function prevSlide() {
      if (currentSlide > 0) {
        currentSlide--;
        renderSlide();
        updateProgress();
      }
    }

    function goToSlide(idx) {
      currentSlide = idx;
      renderSlide();
      updateProgress();
    }

    // Quiz Functions
    let currentQuestion = 0;

    function startQuiz() {
      document.getElementById('course-screen').classList.add('hidden');
      document.getElementById('quiz-screen').classList.remove('hidden');
      currentQuestion = 0;
      quizAnswers = {};
      renderQuestion();
    }

    function renderQuestion() {
      const slide = slides[currentQuestion];
      const quiz = slide.quiz;
      const container = document.getElementById('quiz-container');
      const selectedAnswer = quizAnswers[currentQuestion];

      container.innerHTML = `
        <div class="slide-enter max-w-2xl mx-auto">
          <div class="text-center mb-6 md:mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-full bg-gradient-to-br from-teal-400 to-teal-600 mb-4 pulse-glow border-4 border-yellow-400" style="border-color: #FFD700;">
              <span class="text-3xl md:text-4xl" aria-hidden="true">‚ùì</span>
            </div>
            <p class="text-gray-300 mb-2 text-xs md:text-lg font-bold">Pregunta ${currentQuestion + 1} de ${slides.length}</p>
            <div class="progress-bar-inc max-w-xs mx-auto mb-4 md:mb-6">
              <div class="progress-bar-inc-fill" style="width: ${((currentQuestion + 1) / slides.length) * 100}%"></div>
            </div>
            <h2 class="font-display text-lg md:text-2xl lg:text-3xl font-bold text-white">
              ${quiz.question}
            </h2>
          </div>
          
          <div class="space-y-2 md:space-y-3">
            ${quiz.options.map((option, idx) => {
              let classes = 'quiz-option w-full p-3 md:p-5 rounded-lg border-2 text-left transition-all font-semibold text-sm md:text-base ';
              let icon = '';
              
              if (selectedAnswer !== undefined) {
                if (idx === quiz.correct) {
                  classes += 'correct bg-green-600/30 border-green-400 text-green-100 font-bold';
                  icon = '‚úÖ';
                } else if (idx === selectedAnswer && idx !== quiz.correct) {
                  classes += 'incorrect bg-red-600/30 border-red-400 text-red-100 font-bold';
                  icon = '‚ùå';
                } else {
                  classes += 'bg-gray-800/70 border-gray-600 text-gray-300';
                }
              } else {
                classes += 'bg-gray-800/50 border-gray-700 text-white cursor-pointer hover:border-yellow-400 hover:bg-gray-800/70';
              }
              
              return `
                <button onclick="selectAnswer(${idx})" class="${classes}" ${selectedAnswer !== undefined ? 'disabled' : ''}>
                  <div class="flex items-center gap-2 md:gap-4">
                    <span class="w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center font-bold text-xs md:text-lg flex-shrink-0" style="background: ${selectedAnswer !== undefined ? 'transparent' : 'rgba(255, 215, 0, 0.3)'}">
                      ${icon || String.fromCharCode(65 + idx)}
                    </span>
                    <span class="font-semibold text-sm md:text-base">${option}</span>
                  </div>
                </button>
              `;
            }).join('')}
          </div>
          
          ${selectedAnswer !== undefined ? `
            <div class="mt-6 md:mt-8 text-center fade-enter">
              <p class="text-base md:text-xl mb-3 md:mb-4 font-bold ${selectedAnswer === quiz.correct ? 'text-green-300' : 'text-red-300'}">
                ${selectedAnswer === quiz.correct ? 'üéâ ¬°Correcto!' : 'üòï Incorrecto. La respuesta correcta era: ' + quiz.options[quiz.correct]}
              </p>
              <button onclick="nextQuestion()" class="px-6 md:px-8 py-2 md:py-3 rounded-lg font-display font-bold transition-all border-3 border-yellow-400 text-sm md:text-base" style="background: linear-gradient(135deg, #1d3c50 0%, #618485 100%); color: white;">
                ${currentQuestion < slides.length - 1 ? 'Siguiente Pregunta ‚Üí' : 'Ir al Juego üéÆ'}
              </button>
            </div>
          ` : ''}
        </div>
      `;
    }

    function selectAnswer(idx) {
      if (quizAnswers[currentQuestion] !== undefined) return;
      quizAnswers[currentQuestion] = idx;
      renderQuestion();
    }

    function nextQuestion() {
      if (currentQuestion < slides.length - 1) {
        currentQuestion++;
        renderQuestion();
      } else {
        startPlanningGame();
      }
    }

    // Planning Game Functions
    function startPlanningGame() {
      document.getElementById('quiz-screen').classList.add('hidden');
      document.getElementById('planning-game-screen').classList.remove('hidden');
      currentPlanningCase = 0;
      planningGameScore = 0;
      planningAnswers = {};
      renderPlanningCase();
    }

    function renderPlanningCase() {
      const caseData = planningScenarios[currentPlanningCase];
      const container = document.getElementById('planning-game-container');
      const answered = planningAnswers[currentPlanningCase] !== undefined;
      const userAnswer = planningAnswers[currentPlanningCase];
      const isCorrect = answered && userAnswer === caseData.correct;

      document.getElementById('game-score').textContent = planningGameScore;

      container.innerHTML = `
        <div class="slide-enter max-w-3xl mx-auto">
          <div class="planning-card rounded-xl p-4 md:p-8 mb-4 md:mb-6 border-3 border-yellow-400">
            <div class="flex items-start justify-between mb-3 md:mb-4 gap-3 flex-wrap">
              <div>
                <div class="text-sm md:text-lg font-semibold mb-1 md:mb-2 font-bold" style="color: #FFD700;">Caso ${currentPlanningCase + 1} de ${planningScenarios.length}</div>
                <h2 class="font-display text-lg md:text-3xl font-bold text-white mb-2">${caseData.title}</h2>
                <p class="text-white text-sm md:text-lg font-bold">${caseData.description}</p>
              </div>
              <div class="text-4xl md:text-6xl flex-shrink-0" aria-hidden="true">${caseData.difficulty === 'easy' ? 'üü¢' : caseData.difficulty === 'medium' ? 'üü°' : 'üî¥'}</div>
            </div>
          </div>

          <div class="grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3 mb-4 md:mb-6">
            <div class="planning-card rounded-lg p-3 md:p-4 border-2 border-yellow-400">
              <div class="text-xl md:text-2xl font-bold mb-1 font-display" style="color: #FFD700;">${caseData.articles}</div>
              <div class="text-xs md:text-sm text-white font-bold">Art√≠culos</div>
            </div>
            <div class="planning-card rounded-lg p-3 md:p-4 border-2 border-yellow-400">
              <div class="text-xl md:text-2xl font-bold mb-1 font-display" style="color: #FFD700;">${String(caseData.timeHour).padStart(2, '0')}:${String(caseData.timeMinute).padStart(2, '0')}</div>
              <div class="text-xs md:text-sm text-white font-bold">Hora Env√≠o</div>
            </div>
            <div class="planning-card rounded-lg p-3 md:p-4 border-2 border-yellow-400">
              <div class="text-xl md:text-2xl font-bold mb-1 font-display text-yellow-300" style="color: #FFD700;">${caseData.format}</div>
              <div class="text-xs md:text-sm text-white font-bold">Formato</div>
            </div>
            <div class="planning-card rounded-lg p-3 md:p-4 border-2 border-yellow-400">
              <div class="text-xl md:text-2xl font-bold mb-1 font-display" style="color: #FFD700;">${caseData.content}</div>
              <div class="text-xs md:text-sm text-white font-bold">Contenido</div>
            </div>
          </div>

          <div class="bg-gray-900/70 rounded-lg p-4 md:p-5 mb-4 md:mb-6 border-3 border-yellow-400">
            <div class="font-display-bold text-white mb-3 md:mb-4 font-bold text-sm md:text-lg" style="color: #FFD700;">‚ÑπÔ∏è Recuerda - Criterios T√©cnicos INC:</div>
            <ul class="text-xs md:text-sm text-white space-y-1 md:space-y-2 font-bold">
              <li>üìÑ <strong>Digitalizaci√≥n:</strong> Word 20 p√°g/h | Escaneado 10 p√°g/h | Manual 5 p√°g/h</li>
              <li>üé® <strong>Diagramaci√≥n:</strong> Texto 27 p√°g/h | Con tablas 20 p√°g/h</li>
              <li>‚úèÔ∏è <strong>Correcci√≥n:</strong> 10 p√°g/h (40.9% del tiempo)</li>
              <li>‚è∞ <strong>Cierre:</strong> Antes de 3:00 p.m. = hoy | Despu√©s = ma√±ana</li>
              <li>üìÖ <strong>Anticipaci√≥n:</strong> ‚â§20 (6 d√≠as) | 21-50 (10 d√≠as) | >50 (15 d√≠as)</li>
            </ul>
          </div>

          <div class="mb-4 md:mb-6">
            <h3 class="text-lg md:text-2xl font-display font-bold text-white mb-3 md:mb-4 font-bold" style="color: #FFD700;">ü§î ¬øPuede este documento publicarse HOY?</h3>
            <div class="grid grid-cols-2 gap-2 md:gap-4">
              <button onclick="answerPlanning(true)" class="planning-card rounded-lg p-4 md:p-8 text-center transition-all border-3 ${answered && !isCorrect && userAnswer === true ? 'border-red-500 bg-red-600/20' : answered && isCorrect && userAnswer === true ? 'border-green-500 bg-green-600/20' : 'border-yellow-400'} ${!answered ? 'hover:border-yellow-300 cursor-pointer' : ''}" ${answered ? 'disabled' : ''}>
                <div class="text-4xl md:text-5xl mb-2 md:mb-3" aria-hidden="true">‚úÖ</div>
                <div class="font-display-bold text-white text-sm md:text-lg font-bold">S√ç, SE PUBLICA</div>
              </button>
              <button onclick="answerPlanning(false)" class="planning-card rounded-lg p-4 md:p-8 text-center transition-all border-3 ${answered && !isCorrect && userAnswer === false ? 'border-red-500 bg-red-600/20' : answered && isCorrect && userAnswer === false ? 'border-green-500 bg-green-600/20' : 'border-yellow-400'} ${!answered ? 'hover:border-yellow-300 cursor-pointer' : ''}" ${answered ? 'disabled' : ''}>
                <div class="text-4xl md:text-5xl mb-2 md:mb-3" aria-hidden="true">‚ùå</div>
                <div class="font-display-bold text-white text-sm md:text-lg font-bold">NO SE PUBLICA</div>
              </button>
            </div>
          </div>

          ${answered ? `
            <div class="rounded-lg p-4 md:p-6 mb-4 md:mb-6 border-3 ${isCorrect ? 'bg-green-600/25 border-green-400' : 'bg-red-600/25 border-red-400'} ${isCorrect ? 'result-success' : 'result-error'}">
              <div class="text-lg md:text-2xl font-bold mb-2 md:mb-3 font-display ${isCorrect ? 'text-green-200' : 'text-red-200'}">
                ${isCorrect ? 'üèÜ ¬°CORRECTO!' : '‚ö†Ô∏è INCORRECTO'}
              </div>
              <p class="text-white mb-2 md:mb-4 leading-relaxed font-semibold text-sm md:text-base">${caseData.feedback}</p>
              ${isCorrect ? `<div class="font-bold text-base md:text-lg" style="color: #FFD700;">+10 Puntos üéâ</div>` : `<div class="text-red-200 font-bold text-sm md:text-base">Puntos: 0</div>`}
            </div>

            <button onclick="nextPlanningCase()" class="w-full px-6 md:px-8 py-3 md:py-4 rounded-lg font-display font-bold transition-all border-3 border-yellow-400 text-sm md:text-base" style="background: linear-gradient(135deg, #1d3c50 0%, #618485 100%); color: white;">
              ${currentPlanningCase < planningScenarios.length - 1 ? 'Siguiente Caso ‚Üí' : 'üéÆ Ir al Ejercicio Pr√°ctico'}
            </button>
          ` : ''}
        </div>
      `;
    }

    function answerPlanning(answer) {
      planningAnswers[currentPlanningCase] = answer;
      const caseData = planningScenarios[currentPlanningCase];
      if (answer === caseData.correct) {
        planningGameScore += 10;
      }
      renderPlanningCase();
    }

    function nextPlanningCase() {
      if (currentPlanningCase < planningScenarios.length - 1) {
        currentPlanningCase++;
        renderPlanningCase();
      } else {
        startPublicationExercise();
      }
    }

    // Publication Exercise
    function startPublicationExercise() {
      document.getElementById('planning-game-screen').classList.add('hidden');
      document.getElementById('exercise-screen').classList.remove('hidden');
      renderPublicationExercise();
    }

    function closeExercise() {
      document.getElementById('exercise-screen').classList.add('hidden');
      showFinalResults();
    }

    function renderPublicationExercise() {
      const container = document.getElementById('exercise-container');
      
      container.innerHTML = `
        <div class="slide-enter max-w-3xl mx-auto">
          <div class="exercise-card rounded-xl p-4 md:p-6">
            <h2 class="font-display text-lg md:text-2xl font-bold text-white mb-2" style="color: #FFD700;">üìã Formulario de Publicaci√≥n Editorial</h2>
            <p class="text-white mb-4 md:mb-6 font-semibold text-sm md:text-base">Completa este formulario realista. Bas√°ndote en la informaci√≥n que ingreses, eval√∫a si tu documento podr√° publicarse dentro de los plazos.</p>
          </div>

          <form id="publication-form" onsubmit="submitPublicationForm(event)" class="space-y-3 md:space-y-6">
            <!-- Entity Info -->
            <div class="exercise-card rounded-lg md:rounded-xl p-4 md:p-6">
              <label class="block text-white font-bold mb-2 md:mb-3 text-base md:text-lg">üèõÔ∏è Entidad Generadora</label>
              <input type="text" placeholder="Ej: Ministerio del Interior" required class="planning-input w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-sm md:text-base font-semibold" id="entity-name">
            </div>

            <!-- Document Category -->
            <div class="exercise-card rounded-lg md:rounded-xl p-4 md:p-6">
              <label class="block text-white font-bold mb-2 md:mb-3 text-base md:text-lg">üìÑ Categor√≠a de Documento (INC)</label>
              <select required class="planning-input w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-sm md:text-base font-semibold" id="doc-type">
                <option value="">-- Selecciona una categor√≠a --</option>
                <optgroup label="1. Normativa Constitucional y Legislativa">
                  <option value="constitutional">Actos legislativos</option>
                  <option value="constitutional">Proyectos de reforma constitucional</option>
                  <option value="legislative">Leyes de la Rep√∫blica</option>
                  <option value="legislative">Proyectos de Ley objetados</option>
                </optgroup>
                <optgroup label="2. Actos Administrativos del Gobierno Nacional">
                  <option value="executive">Decretos con fuerza de Ley</option>
                  <option value="executive">Decretos ejecutivos del Gobierno</option>
                  <option value="executive">Resoluciones ejecutivas del Gobierno</option>
                </optgroup>
                <optgroup label="3. Actos Administrativos de Car√°cter General">
                  <option value="administrative">Actos de car√°cter general (orden nacional)</option>
                  <option value="administrative">Resoluciones de ministerios</option>
                  <option value="administrative">Acuerdos y circulares nacionales</option>
                </optgroup>
                <optgroup label="4. Actos Judiciales y Notificaciones">
                  <option value="judicial">Edictos y avisos judiciales</option>
                  <option value="judicial">Sentencias judiciales</option>
                  <option value="judicial">Actos que afecten a terceros</option>
                  <option value="judicial">Avisos de reclamaci√≥n prestacional</option>
                </optgroup>
                <optgroup label="5. Gesti√≥n de Bienes y Contrataci√≥n">
                  <option value="property">Disposici√≥n de bienes Nacionales</option>
                  <option value="property">Publicaci√≥n de licitaciones</option>
                  <option value="property">Contratos (seg√∫n INC)</option>
                </optgroup>
                <optgroup label="6. Documentos Corporativos y Personal">
                  <option value="corporate">Estados financieros p√∫blicos</option>
                  <option value="corporate">Estatutos y personer√≠as</option>
                  <option value="corporate">Actos de nombramiento</option>
                  <option value="corporate">Actos de elecci√≥n</option>
                </optgroup>
                <optgroup label="7. Organismos Internacionales">
                  <option value="international">Decisiones de organismos internacionales</option>
                </optgroup>
              </select>
              <div class="text-xs text-gray-300 mt-2 font-semibold">üìã Basado en Decreto Ley 2150/1995 y Ley 489/1998</div>
            </div>

            <!-- Articles Count -->
            <div class="exercise-card rounded-lg md:rounded-xl p-4 md:p-6">
              <label class="block text-white font-bold mb-2 md:mb-3 text-base md:text-lg">üìë Cantidad de Art√≠culos</label>
              <input type="number" min="1" max="500" placeholder="Ej: 25" required class="planning-input w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-sm md:text-base font-semibold" id="article-count">
            </div>

            <!-- Original Format -->
            <div class="exercise-card rounded-lg md:rounded-xl p-4 md:p-6">
              <label class="block text-white font-bold mb-2 md:mb-3 text-base md:text-lg">üíæ Formato Original</label>
              <div class="space-y-2">
                <label class="flex items-center gap-2 md:gap-3 p-2 md:p-3 rounded-lg border-2 border-gray-700 cursor-pointer hover:border-yellow-400">
                  <input type="radio" name="format" value="word" checked class="w-4 h-4 md:w-5 md:h-5">
                  <span class="text-white font-semibold text-sm md:text-base">üìù Archivo Word (√≥ptimo)</span>
                </label>
                <label class="flex items-center gap-2 md:gap-3 p-2 md:p-3 rounded-lg border-2 border-gray-700 cursor-pointer hover:border-yellow-400">
                  <input type="radio" name="format" value="scanned" class="w-4 h-4 md:w-5 md:h-5">
                  <span class="text-white font-semibold text-sm md:text-base">üñºÔ∏è Documento Escaneado (OCR)</span>
                </label>
                <label class="flex items-center gap-2 md:gap-3 p-2 md:p-3 rounded-lg border-2 border-gray-700 cursor-pointer hover:border-yellow-400">
                  <input type="radio" name="format" value="manual" class="w-4 h-4 md:w-5 md:h-5">
                  <span class="text-white font-semibold text-sm md:text-base">‚å®Ô∏è Texto Manual (digitaci√≥n)</span>
                </label>
              </div>
            </div>

            <!-- Content Complexity -->
            <div class="exercise-card rounded-lg md:rounded-xl p-4 md:p-6">
              <label class="block text-white font-bold mb-2 md:mb-3 text-base md:text-lg">üìä Complejidad del Contenido</label>
              <div class="space-y-2">
                <label class="flex items-center gap-2 md:gap-3 p-2 md:p-3 rounded-lg border-2 border-gray-700 cursor-pointer hover:border-yellow-400">
                  <input type="radio" name="complexity" value="simple" checked class="w-4 h-4 md:w-5 md:h-5">
                  <span class="text-white font-semibold text-sm md:text-base">üìù Solo Texto (simple)</span>
                </label>
                <label class="flex items-center gap-2 md:gap-3 p-2 md:p-3 rounded-lg border-2 border-gray-700 cursor-pointer hover:border-yellow-400">
                  <input type="radio" name="complexity" value="complex" class="w-4 h-4 md:w-5 md:h-5">
                  <span class="text-white font-semibold text-sm md:text-base">üìà Con tablas, gr√°ficos e im√°genes</span>
                </label>
              </div>
            </div>

            <!-- Submission Time -->
            <div class="exercise-card rounded-lg md:rounded-xl p-4 md:p-6">
              <label class="block text-white font-bold mb-2 md:mb-3 text-base md:text-lg">üïê Hora de Radicaci√≥n</label>
              <div class="flex gap-2 md:gap-3">
                <div>
                  <label for="submit-hour" class="sr-only">Hora</label>
                  <input type="number" id="submit-hour" min="8" max="17" value="14" class="planning-input w-16 md:w-20 px-2 md:px-3 py-2 md:py-3 rounded-lg text-center text-sm md:text-base font-semibold">
                </div>
                <div>
                  <label for="submit-minute" class="sr-only">Minutos</label>
                  <input type="number" id="submit-minute" min="0" max="59" value="30" class="planning-input w-16 md:w-20 px-2 md:px-3 py-2 md:py-3 rounded-lg text-center text-sm md:text-base font-semibold">
                </div>
                <span class="text-white font-bold flex items-center text-sm md:text-base">horas</span>
              </div>
            </div>

            <!-- Days in Advance -->
            <div class="exercise-card rounded-lg md:rounded-xl p-4 md:p-6">
              <label class="block text-white font-bold mb-2 md:mb-3 text-base md:text-lg">üìÖ ¬øCon cu√°ntos d√≠as de anticipaci√≥n planicas este env√≠o?</label>
              <input type="number" min="0" max="30" placeholder="Ej: 10" required class="planning-input w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-sm md:text-base font-semibold" id="days-advance">
            </div>

            <!-- Justification -->
            <div class="exercise-card rounded-lg md:rounded-xl p-4 md:p-6">
              <label class="block text-white font-bold mb-2 md:mb-3 text-base md:text-lg">üí≠ Tu Evaluaci√≥n Profesional</label>
              <p class="text-gray-300 mb-2 md:mb-3 font-semibold text-xs md:text-sm">¬øCrees que este documento podr√° publicarse en el Diario Oficial respetando los plazos normativos? ¬øPor qu√©?</p>
              <textarea placeholder="Explica tu an√°lisis considerando los criterios t√©cnicos de la INC..." required class="planning-input w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-sm md:text-base font-semibold" id="evaluation" rows="4" style="resize: vertical;"></textarea>
            </div>

            <!-- Submit -->
            <div class="flex gap-2 md:gap-4 flex-wrap">
              <button type="submit" class="flex-1 px-4 md:px-6 py-3 md:py-4 rounded-lg font-display font-bold transition-all border-3 border-yellow-400 text-sm md:text-base" style="background: linear-gradient(135deg, #1d3c50 0%, #618485 100%); color: white;">
                ‚úì Enviar Evaluaci√≥n
              </button>
              <button type="button" onclick="skipExercise()" class="px-3 md:px-6 py-3 md:py-4 rounded-lg font-bold border-2 text-sm md:text-base" style="background: rgba(255, 255, 255, 0.1); color: white; border-color: rgba(255, 255, 255, 0.3);">
                Saltar
              </button>
            </div>
          </form>
        </div>
      `;
    }

    function submitPublicationForm(event) {
      event.preventDefault();
      
      const entity = document.getElementById('entity-name').value;
      const format = document.querySelector('input[name="format"]:checked').value;
      const articles = parseInt(document.getElementById('article-count').value);
      const complexity = document.querySelector('input[name="complexity"]:checked').value;
      const hour = parseInt(document.getElementById('submit-hour').value);
      const minute = parseInt(document.getElementById('submit-minute').value);
      const daysAdvance = parseInt(document.getElementById('days-advance').value);
      const evaluation = document.getElementById('evaluation').value;

      const difficulty = getDifficultyCategory(articles);
      const requiredDays = difficulty.days;
      const isOnTime = daysAdvance >= requiredDays && (hour < 15 || (hour === 15 && minute === 0));

      const resultHTML = `
        <div class="exercise-card rounded-lg md:rounded-xl p-4 md:p-6 border-3 ${isOnTime ? 'border-green-400 bg-green-600/25' : 'border-red-400 bg-red-600/25'}">
          <h3 class="text-lg md:text-2xl font-bold mb-3 md:mb-4 ${isOnTime ? 'text-green-200' : 'text-red-200'}">
            ${isOnTime ? '‚úÖ PUBLICACI√ìN EXITOSA' : '‚ùå RIESGO DE RETRASO'}
          </h3>
          <div class="text-white font-semibold space-y-2 text-xs md:text-sm">
            <p><strong>Entidad:</strong> ${entity}</p>
            <p><strong>Art√≠culos:</strong> ${articles} (${articlesToPagesEstimate(articles)} p√°ginas estimadas)</p>
            <p><strong>Anticipaci√≥n requerida:</strong> ${requiredDays} d√≠as h√°biles</p>
            <p><strong>Anticipaci√≥n planificada:</strong> ${daysAdvance} d√≠as h√°biles</p>
            <p><strong>An√°lisis:</strong> ${isOnTime ? 'Has demostrado excelente planeaci√≥n. El documento cumple con todos los plazos. ¬°Corresponsabilidad en acci√≥n!' : 'Necesitas m√°s tiempo de anticipaci√≥n para garantizar la publicaci√≥n oportuna.'}</p>
          </div>
        </div>
      `;

      document.getElementById('publication-form').innerHTML = resultHTML;
      
      setTimeout(() => {
        closeExercise();
      }, 3000);
    }

    function skipExercise() {
      closeExercise();
    }

    async function showFinalResults() {
      document.getElementById('exercise-screen').classList.add('hidden');
      document.getElementById('results-screen').classList.remove('hidden');
      
      const quizCorrect = Object.entries(quizAnswers).filter(
        ([qIdx, answer]) => slides[parseInt(qIdx)].quiz.correct === answer
      ).length;
      
      quizPercentage = Math.round((quizCorrect / slides.length) * 100);
      
      const planningCorrect = Object.entries(planningAnswers).filter(
        ([cIdx, answer]) => planningScenarios[parseInt(cIdx)].correct === answer
      ).length;

      const totalScore = quizCorrect * 12.5 + planningGameScore;
      const maxScore = (slides.length * 12.5) + (planningScenarios.length * 10);
      const finalPercentage = Math.round((totalScore / maxScore) * 100);
      const passed = finalPercentage >= 70;

      const container = document.getElementById('results-container');
      
      container.innerHTML = `
        <div class="slide-enter w-full">
          <div class="relative mb-6 md:mb-8">
            <div class="w-32 h-32 md:w-40 md:h-40 mx-auto rounded-full bg-gradient-to-br ${passed ? 'from-teal-400 to-teal-600' : 'from-orange-400 to-orange-600'} flex items-center justify-center shadow-2xl pulse-glow border-4 border-yellow-400" style="border-color: #FFD700;">
              <span class="text-5xl md:text-7xl" aria-hidden="true">${passed ? 'üèÜ' : 'üìö'}</span>
            </div>
          </div>
          
          <h2 class="font-display text-2xl md:text-4xl lg:text-5xl font-bold text-white mb-4">
            ${passed ? '¬°Felicitaciones, Experto!' : '¬°Sigue Aprendiendo!'}
          </h2>
          
          <div class="bg-white/15 backdrop-blur rounded-lg md:rounded-2xl p-6 md:p-8 mb-4 md:mb-6 border-4 border-yellow-400" style="border-color: #FFD700;">
            <div class="text-5xl md:text-7xl font-bold mb-2 md:mb-3" style="color: #FFD700;">
              ${finalPercentage}%
            </div>
            <p class="text-white text-base md:text-xl font-bold">
              Puntuaci√≥n Total: ${Math.round(totalScore)} / ${Math.round(maxScore)}
            </p>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4 mb-4 md:mb-6">
            <div class="bg-blue-600/30 rounded-lg md:rounded-xl p-4 md:p-5 border-3 border-blue-400">
              <div class="text-lg md:text-2xl font-display-bold text-blue-200 mb-2 font-bold">Test de Conocimiento</div>
              <div class="text-3xl md:text-4xl font-bold text-blue-100">${quizCorrect}/${slides.length}</div>
              <div class="text-xs md:text-sm text-blue-200 mt-2 font-bold">${quizPercentage}% Correcto</div>
            </div>
            <div class="bg-purple-600/30 rounded-lg md:rounded-xl p-4 md:p-5 border-3 border-purple-400">
              <div class="text-lg md:text-2xl font-display-bold text-purple-200 mb-2 font-bold">Juego Planeaci√≥n</div>
              <div class="text-3xl md:text-4xl font-bold text-purple-100">${planningCorrect}/${planningScenarios.length}</div>
              <div class="text-xs md:text-sm text-purple-200 mt-2 font-bold">${planningGameScore} puntos</div>
            </div>
          </div>

          <div class="bg-gradient-to-r from-teal-600/40 to-cyan-600/40 rounded-lg md:rounded-xl p-4 md:p-6 mb-4 md:mb-6 border-4" style="border-color: #FFD700;">
            <div class="text-center">
              <div class="text-5xl md:text-6xl mb-2 md:mb-3" aria-hidden="true">${passed ? '‚≠ê' : 'üéñÔ∏è'}</div>
              <div class="font-display-bold text-white text-lg md:text-2xl font-bold mb-2" style="color: #FFD700;">
                ${passed ? 'SERVIDOR P√öBLICO CERTIFICADO' : 'En Camino a la Certificaci√≥n'}
              </div>
              <p class="text-white text-sm md:text-base font-bold">
                ${passed ? 'Demostraste excelencia en planeaci√≥n responsable de las publicaciones y dominio de los criterios t√©cnicos de la INC.' : 'Completa el curso con 70% o m√°s para obtener tu certificaci√≥n.'}
              </p>
            </div>
          </div>

          ${passed ? `
            <div class="bg-green-600/35 rounded-lg md:rounded-xl p-4 md:p-5 mb-4 md:mb-6 border-3 border-green-400 text-center">
              <div class="text-4xl md:text-5xl mb-2 md:mb-3" aria-hidden="true">üìú</div>
              <p class="text-green-200 font-bold mb-3 text-base md:text-lg">¬°Has aprobado el quiz!</p>
              <button onclick="requestUserData()" class="btn-primary text-sm md:text-base">
                üìã Solicitar Certificado
              </button>
            </div>
          ` : ''}

          <div class="space-y-2 md:space-y-3">
            <button onclick="restartCourse()" class="w-full px-4 md:px-6 py-3 md:py-4 rounded-lg md:rounded-xl font-display font-bold transition-all border-3 border-yellow-400 text-sm md:text-base" style="background: linear-gradient(135deg, #1d3c50 0%, #618485 100%); color: white;">
              üîÑ Volver a Intentar
            </button>
            <button onclick="useCalculatorFinal()" class="w-full px-4 md:px-6 py-3 md:py-4 rounded-lg md:rounded-xl font-display font-bold transition-all border-3 border-yellow-400 text-sm md:text-base" style="background: rgba(255, 215, 0, 0.15); color: white;">
              üßÆ Usar Calculadora
            </button>
            <button onclick="reviewContent()" class="w-full px-4 md:px-6 py-3 md:py-4 bg-gray-700 text-white font-semibold rounded-lg md:rounded-xl hover:bg-gray-600 transition-all border-2 border-gray-600 text-sm md:text-base">
              üìñ Revisar Contenido
            </button>
          </div>

          <p class="text-gray-300 text-xs md:text-base mt-4 md:mt-6 text-center font-bold">
            ${passed ? '¬°Ahora eres un experto en planeaci√≥n editorial! Comparte tus conocimientos con tus colegas. üåü' : 'Sigue estudiando los criterios t√©cnicos de la INC y aprender√°s a dominar la planeaci√≥n para las publicaciones de tu entidad. üìö'}
          </p>
        </div>
      `;

      await saveProgress(quizCorrect, slides.length, planningGameScore, finalPercentage);
    }

    function requestUserData() {
      document.getElementById('results-screen').classList.add('hidden');
      document.getElementById('user-data-screen').classList.remove('hidden');
      renderUserDataForm();
    }

    function renderUserDataForm() {
      const container = document.getElementById('user-data-container');
      
      container.innerHTML = `
        <div class="slide-enter max-w-2xl mx-auto w-full">
          <div class="text-center mb-6 md:mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-full bg-gradient-to-br from-teal-400 to-teal-600 mb-4 pulse-glow border-4 border-yellow-400" style="border-color: #FFD700;">
              <span class="text-3xl md:text-4xl" aria-hidden="true">üìã</span>
            </div>
            <h2 class="font-display text-2xl md:text-3xl lg:text-4xl font-bold text-white mb-2">
              Datos del Servidor P√∫blico
            </h2>
            <p class="text-gray-300 text-sm md:text-base font-semibold">
              Para generar tu certificado, completa tus datos personales
            </p>
          </div>

          <form id="user-data-form" onsubmit="submitUserData(event)" class="space-y-4 md:space-y-6 bg-white/15 backdrop-blur rounded-lg md:rounded-xl p-4 md:p-6 border-3 border-yellow-400">
            <!-- Full Name -->
            <div>
              <label class="block text-white font-bold mb-2 text-sm md:text-base">üë§ Nombres y Apellidos</label>
              <input type="text" placeholder="Ej: Juan Carlos Rodr√≠guez Gonz√°lez" required class="planning-input w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-sm md:text-base font-semibold" id="user-name">
            </div>

            <!-- Document Type -->
            <div>
              <label class="block text-white font-bold mb-2 text-sm md:text-base">üÜî Tipo de Documento de Identidad</label>
              <select required class="planning-input w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-sm md:text-base font-semibold" id="document-type">
                <option value="">-- Selecciona un tipo --</option>
                <option value="CC">C√©dula de Ciudadan√≠a</option>
                <option value="CE">C√©dula de Extranjer√≠a</option>
                <option value="PA">Pasaporte</option>
              </select>
            </div>

            <!-- Document Number -->
            <div>
              <label class="block text-white font-bold mb-2 text-sm md:text-base">üìÑ N√∫mero del Documento</label>
              <input type="text" placeholder="Ej: 1234567890" required class="planning-input w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-sm md:text-base font-semibold" id="document-number">
            </div>

            <!-- Entity/Organization -->
            <div>
              <label class="block text-white font-bold mb-2 text-sm md:text-base">üèõÔ∏è Entidad en la que Labora</label>
              <input type="text" placeholder="Ej: Ministerio del Interior" required class="planning-input w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-sm md:text-base font-semibold" id="entity">
            </div>

            <div class="flex gap-2 md:gap-4 flex-wrap">
              <button type="submit" class="flex-1 px-4 md:px-6 py-3 md:py-4 rounded-lg font-display font-bold transition-all border-3 border-yellow-400 text-sm md:text-base" style="background: linear-gradient(135deg, #1d3c50 0%, #618485 100%); color: white;">
                ‚úì Generar Certificado
              </button>
              <button type="button" onclick="backToResults()" class="px-4 md:px-6 py-3 md:py-4 bg-gray-700 text-white font-semibold rounded-lg hover:bg-gray-600 transition-all border-2 border-gray-600 text-sm md:text-base">
                ‚Üê Volver
              </button>
            </div>
          </form>
        </div>
      `;
    }

    function submitUserData(event) {
      event.preventDefault();
      
      userData = {
        name: document.getElementById('user-name').value,
        documentType: document.getElementById('document-type').value,
        documentNumber: document.getElementById('document-number').value,
        entity: document.getElementById('entity').value
      };

      generateCertificate();
    }

    function backToResults() {
      document.getElementById('user-data-screen').classList.add('hidden');
      document.getElementById('results-screen').classList.remove('hidden');
    }

    function generateCertificate() {
      document.getElementById('user-data-screen').classList.add('hidden');
      document.getElementById('certificate-screen').classList.remove('hidden');
      renderCertificate();
    }

    function renderCertificate() {
      const today = new Date();
      const dateStr = today.toLocaleDateString('es-CO', { year: 'numeric', month: 'long', day: 'numeric' });
      
      const container = document.getElementById('certificate-container');
      container.innerHTML = `
        <div class="slide-enter w-full">
          <div class="certificate-container">
            <div class="certificate-header">
              <div class="certificate-seal" aria-label="Logo Imprenta Nacional de Colombia">üèõÔ∏è</div>
              <div style="color: #1d3c50; font-size: 0.8rem; letter-spacing: 2px; font-weight: 900;">IMPRENTA NACIONAL DE COLOMBIA</div>
              <h1 class="certificate-title">CERTIFICADO DE FINALIZACI√ìN</h1>
              <div style="color: #618485; font-size: 0.9rem; margin-top: 0.5rem; font-weight: 700;">Curso: Diario Oficial - INC | ¬øC√≥mo publicar a tiempo?</div>
            </div>

            <div style="text-align: center; padding: 1.5rem 0; color: #1d3c50;">
              <p style="font-size: 0.95rem; margin-bottom: 1rem; font-weight: 700;">Por este medio la INC certifica que:</p>
              <p style="font-family: 'Nunito Sans', Verdana, sans-serif; font-weight: 900; font-size: 1.3rem; margin-bottom: 0.5rem; color: #1d3c50;">
                ${userData.name}
              </p>
              <p style="font-size: 0.85rem; margin-bottom: 1.5rem; font-weight: 700; color: #618485;">
                ${userData.documentType} N¬∫ ${userData.documentNumber}
              </p>
              <p style="font-size: 0.9rem; margin-bottom: 2rem; font-weight: 700;">Servidor P√∫blico</p>
              
              <p style="font-size: 0.9rem; margin-bottom: 1rem; font-weight: 700;">ha completado satisfactoriamente el</p>
              <p style="font-family: 'Nunito Sans', Verdana, sans-serif; font-weight: 900; font-size: 1.2rem; color: #618485; margin-bottom: 1.5rem;">DIARIO OFICIAL - INC<br>¬øC√ìMO PUBLICAR A TIEMPO?</p>
              <p style="font-size: 0.85rem; margin-bottom: 1.5rem; font-weight: 700;">con una calificaci√≥n de</p>
              <p style="font-family: 'Nunito Sans', Verdana, sans-serif; font-weight: 900; font-size: 1.8rem; color: #618485; margin-bottom: 0.5rem;">${quizPercentage}%</p>
              <p style="font-size: 0.8rem; color: #1d3c50; margin-bottom: 2rem; font-weight: 700;">en el componente de Evaluaci√≥n de conocimientos</p>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 3px solid #1d3c50;">
              <div style="text-align: center;">
                <div style="height: 60px; margin-bottom: 0.5rem;"></div>
                <div style="font-family: 'Nunito Sans', Verdana, sans-serif; font-weight: 900; color: #1d3c50; font-size: 0.8rem;">Viviana Le√≥n Herrera</div>
                <div style="color: #618485; font-size: 0.75rem; margin-top: 0.3rem; font-weight: 700;">Gerente General - INC</div>
              </div>
              <div style="text-align: center;">
                <div style="font-family: 'Nunito Sans', Verdana, sans-serif; font-weight: 900; color: #1d3c50; font-size: 0.85rem; margin-bottom: 0.3rem;">${dateStr}</div>
                <div style="color: #618485; font-size: 0.75rem; font-weight: 700;">Fecha de Expedici√≥n</div>
              </div>
            </div>

            <div style="text-align: center; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 2px solid #618485;">
              <div style="font-family: 'Nunito Sans', Verdana, sans-serif; font-weight: 900; color: #1d3c50; font-size: 0.8rem; margin-bottom: 0.8rem;">Este certificado reconoce competencias en:</div>
              <ul style="list-style: none; padding: 0; color: #1d3c50; font-size: 0.75rem; font-weight: 700;">
                <li>‚úì Conocimiento del marco legal y procedimental del Diario Oficial</li>
                <li>‚úì Dominio de criterios t√©cnicos de producci√≥n editorial (INC)</li>
                <li>‚úì Planeaci√≥n estrat√©gica de documentos para publicaci√≥n</li>
                <li>‚úì Cumplimiento de directivas presidenciales y plazos legales</li>          
              </ul>
            </div>
          </div>

          <div class="flex justify-center gap-2 md:gap-4 flex-wrap mt-4 md:mt-8">
            <button onclick="downloadCertificatePDF()" class="btn-primary text-sm md:text-base">
              üì• Descargar PDF
            </button>
            <button onclick="shareApproval()" class="btn-primary text-sm md:text-base">
              üì§ Compartir
            </button>
            <button onclick="restartCourse()" class="btn-secondary text-sm md:text-base">
              ‚Üê Volver al Inicio
            </button>
          </div>
        </div>
      `;
    }

    function downloadCertificatePDF() {
      window.print();
    }

    function shareApproval() {
      const text = `¬°Acabo de completar el Curso: Diario Oficial - INC | ¬øC√≥mo publicar a tiempo? con ${quizPercentage}% en evaluaci√≥n de conocimientos. üéìüìú #DiarioOficial #INC`;
      
      if (navigator.share) {
        navigator.share({
          title: 'Certificado de Curso - Imprenta Nacional de Colombia',
          text: text
        });
      } else {
        alert(text);
      }
    }

    async function saveProgress(quizScore, quizTotal, gameScore, finalPercentage) {
      if (!window.dataSdk) return;
      
      if (progressData.length >= 999) {
        console.warn("Maximum records reached");
        return;
      }

      const result = await window.dataSdk.create({
        completed_slides: 'all',
        quiz_score: quizScore,
        total_questions: quizTotal,
        planning_game_score: gameScore,
        final_percentage: finalPercentage,
        calculator_usage: 'explored',
        glossary_searches: 0,
        user_name: userData.name || 'An√≥nimo',
        user_document_type: userData.documentType || '',
        user_document_number: userData.documentNumber || '',
        user_entity: userData.entity || '',
        certificate_generated: true,
        completed_at: new Date().toISOString()
      });

      if (!result.isOk) {
        console.error("Failed to save progress");
      }
    }

    function restartCourse() {
      currentSlide = 0;
      currentQuestion = 0;
      currentPlanningCase = 0;
      quizAnswers = {};
      planningAnswers = {};
      planningGameScore = 0;
      userData = {};
      
      document.getElementById('results-screen').classList.add('hidden');
      document.getElementById('certificate-screen').classList.add('hidden');
      document.getElementById('user-data-screen').classList.add('hidden');
      document.getElementById('welcome-screen').classList.remove('hidden');
    }

    function useCalculatorFinal() {
      document.getElementById('results-screen').classList.add('hidden');
      document.getElementById('certificate-screen').classList.add('hidden');
      openCalculator();
    }

    function reviewContent() {
      currentSlide = 0;
      currentQuestion = 0;
      currentPlanningCase = 0;
      
      document.getElementById('results-screen').classList.add('hidden');
      document.getElementById('certificate-screen').classList.add('hidden');
      document.getElementById('course-screen').classList.remove('hidden');
      
      renderSlide();
      updateProgress();
    }

    // Initialize
    initSDKs();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ccdfd8104eddead',t:'MTc3MDkxOTI3NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
